

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>36. 线性规划 &#8212; Python数量经济学入门</title>
    <script src="https://unpkg.com/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://unpkg.com/tippy.js@6.3.1/dist/tippy-bundle.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    
        <script>
            MathJax = {
            loader: {load: ['[tex]/boldsymbol', '[tex]/textmacros']},
            tex: {
                packages: {'[+]': ['boldsymbol', 'textmacros']},
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                processEscapes: true,
                macros: {
                    "argmax" : "arg\\,max",
                    "argmin" : "arg\\,min",
                    "col"    : "col",
                    "Span"   :  "span",
                    "epsilon": "\\varepsilon",
                    "EE": "\\mathbb{E}",
                    "PP": "\\mathbb{P}",
                    "RR": "\\mathbb{R}",
                    "NN": "\\mathbb{N}",
                    "ZZ": "\\mathbb{Z}",
                    "aA": "\\mathcal{A}",
                    "bB": "\\mathcal{B}",
                    "cC": "\\mathcal{C}",
                    "dD": "\\mathcal{D}",
                    "eE": "\\mathcal{E}",
                    "fF": "\\mathcal{F}",
                    "gG": "\\mathcal{G}",
                    "hH": "\\mathcal{H}",
                }
            },
            svg: {
                fontCache: 'global',
                scale: 0.92,
                displayAlign: "center",
            },
            };
        </script>
    
    
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/quantecon-book-theme.css?digest=f77998adf44a3f900caaca31caf410c810f6f245" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/exercise.css" />
    <link rel="stylesheet" type="text/css" href="_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>


    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/scripts/quantecon-book-theme.js?digest=eed9c059a3ee152aae2353ec732f0a6d12e6aa07"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-QDS1YRJNGM"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-QDS1YRJNGM');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"tex": {"macros": {"argmax": "arg\\,max", "argmin": "arg\\,min"}}, "options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'lp_intro';</script>
    <link rel="canonical" href="https://intro-cn.quantecon.org/lp_intro.html" />
    <link rel="shortcut icon" href="_static/lectures-favicon.ico"/>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="37. 最短路径" href="short_path.html" />
    <link rel="prev" title="35. 用矩阵代数表示的单变量时间序列" href="time_series_with_matrices.html" />

<!-- Normal Meta Tags -->
<meta name="author" context="托马斯·萨金特（Thomas J. Sargent）和约翰·斯塔胡斯基（John Stachurski）" />
<meta name="keywords" content="Python, QuantEcon, Quantitative Economics, Economics, Sloan, Alfred P. Sloan Foundation, Tom J. Sargent, John Stachurski" />
<meta name="description" content=本课程是由托马斯·萨金特（Thomas J. Sargent）和约翰·斯塔胡斯基（John Stachurski）设计和撰写的计算经济学入门讲座。 />

<!-- Twitter tags -->
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@quantecon" />
<meta name="twitter:title" content="线性规划"/>
<meta name="twitter:description" content="本课程是由托马斯·萨金特（Thomas J. Sargent）和约翰·斯塔胡斯基（John Stachurski）设计和撰写的计算经济学入门讲座。">
<meta name="twitter:creator" content="@quantecon">
<meta name="twitter:image" content="https://assets.quantecon.org/img/qe-twitter-logo.png">

<!-- Opengraph tags -->
<meta property="og:title" content="线性规划" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://intro-cn.quantecon.org/lp_intro.html" />
<meta property="og:image" content="https://assets.quantecon.org/img/qe-og-logo.png" />
<meta property="og:description" content="本课程是由托马斯·萨金特（Thomas J. Sargent）和约翰·斯塔胡斯基（John Stachurski）设计和撰写的计算经济学入门讲座。" />
<meta property="og:site_name" content="Python数量经济学入门" />
<meta name="theme-color" content="#ffffff" />

  </head>
<body>


    <span id="top"></span>

    <div class="qe-wrapper">

        <div class="qe-main">

            <div class="qe-page" id=lp_intro>

                <div class="qe-page__toc">

                    <div class="inner">

                        
                        <div class="qe-page__toc-header">
                            On this page
                        </div>


                        <nav id="bd-toc-nav" class="qe-page__toc-nav">
                            <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">36.1. 概述</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">36.2. 示例 1：生产问题</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#or-tools">36.2.1. 计算：使用 OR-Tools</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">36.3. 示例 2：投资问题</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">36.3.1. 计算：使用 OR-Tools</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">36.4. 标准形式</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">36.4.1. 有用的变换</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">36.4.2. 示例 1：生产问题</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scipy">36.4.3. 计算：使用 SciPy</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">36.4.4. 示例 2：投资问题</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">36.5. 练习</a></li>
</ul>
                            <p class="logo">
                                
                                    
                                    <a href=https://quantecon.org><img src="_static/qe-logo.png" class="logo logo-img" alt="logo"></a>
                                    
                                    <a href=https://quantecon.org><img src="_static/quantecon-logo-transparent.png" class="dark-logo-img" alt="logo"></a>
                                    
                                    
                                
                            </p>

                            <p class="powered">Powered by <a href="https://jupyterbook.org/">Jupyter Book</a></p>

                        </nav>

                        <div class="qe-page__toc-footer">
                            
                            
                            <p><a href="#top"><strong>Back to top</strong></a></p>
                        </div>

                    </div>

                </div>

                <div class="qe-page__header">

                    <div class="qe-page__header-copy">

                        <p class="qe-page__header-heading"><a href="intro.html">Python数量经济学入门</a></p>

                        <p class="qe-page__header-subheading">线性规划</p>

                    </div>
                    <!-- length 2, since its a string and empty dict has length 2 - {} -->
                        <p class="qe-page__header-authors" font-size="18">
                            
                                
                                    <a href="http://www.tomsargent.com/" target="_blank"><span>托马斯·萨金特（Thomas J. Sargent）</span></a>
                                
                            
                                
                                    and <a href="https://johnstachurski.net/" target="_blank"><span>约翰·斯塔胡斯基（John Stachurski）</span></a>
                                
                            
                        </p>


                </div> <!-- .page__header -->



                
                <main class="qe-page__content" role="main">
                    
                    <div>
                        
  <section class="tex2jax_ignore mathjax_ignore" id="lp-intro">
<span id="id1"></span><h1><span class="section-number">36. </span>线性规划<a class="headerlink" href="#lp-intro" title="Permalink to this heading">#</a></h1>
<p>在本讲中，我们将需要以下库。使用 <code class="docutils literal notranslate"><span class="pre">pip</span></code> 安装 <a class="reference external" href="https://developers.google.com/optimization">ortools</a>。</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>ortools
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Collecting ortools
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  Downloading ortools-9.11.4210-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (3.0 kB)
Collecting absl-py&gt;=2.0.0 (from ortools)
  Downloading absl_py-2.1.0-py3-none-any.whl.metadata (2.3 kB)
Requirement already satisfied: numpy&gt;=1.13.3 in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from ortools) (1.26.4)
Requirement already satisfied: pandas&gt;=2.0.0 in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from ortools) (2.2.2)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Collecting protobuf&lt;5.27,&gt;=5.26.1 (from ortools)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  Downloading protobuf-5.26.1-cp37-abi3-manylinux2014_x86_64.whl.metadata (592 bytes)
Collecting immutabledict&gt;=3.0.0 (from ortools)
  Downloading immutabledict-4.2.0-py3-none-any.whl.metadata (3.4 kB)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: python-dateutil&gt;=2.8.2 in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from pandas&gt;=2.0.0-&gt;ortools) (2.9.0.post0)
Requirement already satisfied: pytz&gt;=2020.1 in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from pandas&gt;=2.0.0-&gt;ortools) (2024.1)
Requirement already satisfied: tzdata&gt;=2022.7 in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from pandas&gt;=2.0.0-&gt;ortools) (2023.3)
Requirement already satisfied: six&gt;=1.5 in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from python-dateutil&gt;=2.8.2-&gt;pandas&gt;=2.0.0-&gt;ortools) (1.16.0)
Downloading ortools-9.11.4210-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (28.1 MB)
?25l   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">0.0/28.1 MB</span> <span class=" -Color -Color-Red">?</span> eta <span class=" -Color -Color-Cyan">-:--:--</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>   ━━╸━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">1.8/28.1 MB</span> <span class=" -Color -Color-Red">52.7 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>   ━━━━━━━━━╺━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">6.7/28.1 MB</span> <span class=" -Color -Color-Red">98.0 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
   ━━━━━━━━━━━━━━━━╸━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">11.6/28.1 MB</span> <span class=" -Color -Color-Red">142.9 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>   ━━━━━━━━━━━━━━━━━━━━━━━━╸━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">17.2/28.1 MB</span> <span class=" -Color -Color-Red">154.7 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸━━━━━━━ <span class=" -Color -Color-Green">22.9/28.1 MB</span> <span class=" -Color -Color-Red">167.0 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸ <span class=" -Color -Color-Green">28.1/28.1 MB</span> <span class=" -Color -Color-Red">178.3 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸ <span class=" -Color -Color-Green">28.1/28.1 MB</span> <span class=" -Color -Color-Red">178.3 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">28.1/28.1 MB</span> <span class=" -Color -Color-Red">82.6 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:00</span>
?25hDownloading absl_py-2.1.0-py3-none-any.whl (133 kB)
?25l   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">0.0/133.7 kB</span> <span class=" -Color -Color-Red">?</span> eta <span class=" -Color -Color-Cyan">-:--:--</span>
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">133.7/133.7 kB</span> <span class=" -Color -Color-Red">24.1 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:00</span>
?25hDownloading immutabledict-4.2.0-py3-none-any.whl (4.7 kB)
Downloading protobuf-5.26.1-cp37-abi3-manylinux2014_x86_64.whl (302 kB)
?25l   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">0.0/302.8 kB</span> <span class=" -Color -Color-Red">?</span> eta <span class=" -Color -Color-Cyan">-:--:--</span>
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">302.8/302.8 kB</span> <span class=" -Color -Color-Red">55.9 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:00</span>
?25h
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Installing collected packages: protobuf, immutabledict, absl-py, ortools
  Attempting uninstall: protobuf
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>    Found existing installation: protobuf 3.20.3
    Uninstalling protobuf-3.20.3:
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>      Successfully uninstalled protobuf-3.20.3
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Red">ERROR: pip&#39;s dependency resolver does not currently take into account all the packages that are installed. This behaviour is the source of the following dependency conflicts.</span>
<span class=" -Color -Color-Red">streamlit 1.32.0 requires protobuf&lt;5,&gt;=3.20, but you have protobuf 5.26.1 which is incompatible.</span>
Successfully installed absl-py-2.1.0 immutabledict-4.2.0 ortools-9.11.4210 protobuf-5.26.1
</pre></div>
</div>
</div>
</details>
</div>
<section id="id2">
<h2><span class="section-number">36.1. </span>概述<a class="headerlink" href="#id2" title="Permalink to this heading">#</a></h2>
<p><strong>线性规划</strong> 问题旨在在一组线性等式和/或不等式约束下，最大化或最小化一个线性目标函数。</p>
<p>线性程序成对出现：</p>
<ul class="simple">
<li><p>一个原始的 <strong>原始</strong> 问题，以及</p></li>
<li><p>一个相关的 <strong>对偶</strong> 问题。</p></li>
</ul>
<p>如果原始问题涉及 <em>最大化</em>，则对偶问题涉及 <em>最小化</em>。</p>
<p>如果原始问题涉及 <em>最小化</em>，则对偶问题涉及 <em>最大化</em>。</p>
<p>我们提供线性程序的标准形式，以及将其他形式的线性规划问题转化为标准形式的方法。</p>
<p>我们将说明如何使用 <a class="reference external" href="https://scipy.org/">SciPy</a> 和 <a class="reference external" href="https://developers.google.com/optimization">Google OR-Tools</a> 来解决线性规划问题。</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>在另一讲中，我们将使用线性规划方法来解决 <a class="reference external" href="https://tools-techniques.quantecon.org/opt_transport.html" title="(in Python)"><span class="xref std std-doc">最优运输问题</span></a>。</p>
</div>
<p>让我们先进行一些标准的导入。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">ortools.linear_solver</span> <span class="kn">import</span> <span class="n">pywraplp</span>
<span class="kn">from</span> <span class="nn">scipy.optimize</span> <span class="kn">import</span> <span class="n">linprog</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.patches</span> <span class="kn">import</span> <span class="n">Polygon</span>

<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="n">FONTPATH</span> <span class="o">=</span> <span class="s2">&quot;fonts/SourceHanSerifSC-SemiBold.otf&quot;</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">font_manager</span><span class="o">.</span><span class="n">fontManager</span><span class="o">.</span><span class="n">addfont</span><span class="p">(</span><span class="n">FONTPATH</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;font.family&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Source Han Serif SC&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>让我们从一些线性规划问题的例子开始。</p>
</section>
<section id="id3">
<h2><span class="section-number">36.2. </span>示例 1：生产问题<a class="headerlink" href="#id3" title="Permalink to this heading">#</a></h2>
<p>这个例子由 <span id="id4">[<a class="reference internal" href="zreferences.html#id63" title="J. N. Bertsimas, D. &amp; Tsitsiklis. Introduction to linear optimization. Athena Scientific, 1997.">Bertsimas, 1997</a>]</span> 创建。</p>
<p>假设一个工厂可以生产两种商品，称为产品 <span class="math notranslate nohighlight">\(1\)</span> 和产品 <span class="math notranslate nohighlight">\(2\)</span>。</p>
<p>生产每种产品都需要材料和劳动。</p>
<p>销售每种产品会产生收入。</p>
<p>每单位所需的材料和劳动投入及其收入如下表所示：</p>
<div class="pst-scrollable-table-container"><table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-center head"><p></p></th>
<th class="text-center head"><p>产品 1</p></th>
<th class="text-center head"><p>产品 2</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>材料</p></td>
<td class="text-center"><p>2</p></td>
<td class="text-center"><p>5</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>劳动</p></td>
<td class="text-center"><p>4</p></td>
<td class="text-center"><p>2</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>收入</p></td>
<td class="text-center"><p>3</p></td>
<td class="text-center"><p>4</p></td>
</tr>
</tbody>
</table>
</div>
<p>可用的材料为 30 单位，劳动为 20 单位。</p>
<p>公司的问题是构建一个生产计划，利用其 30 单位的材料和 20 单位的劳动来最大化其收入。</p>
<p>令 <span class="math notranslate nohighlight">\(x_i\)</span> 表示公司生产的产品 <span class="math notranslate nohighlight">\(i\)</span> 的数量，<span class="math notranslate nohighlight">\(z\)</span> 表示总收入。</p>
<p>该问题可以表述为：</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{aligned}
\max_{x_1,x_2} \ &amp; z = 3 x_1 + 4 x_2 \\
\mbox{受以下约束 } \ &amp; 2 x_1 + 5 x_2 \le 30 \\
&amp; 4 x_1 + 2 x_2 \le 20 \\
&amp; x_1, x_2 \ge 0 \\
\end{aligned}
\end{split}\]</div>
<p>下图说明了公司的约束条件和等收入线。</p>
<p>等收入线显示了产生相同收入的材料和劳动的所有组合。</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="c1">#绘制约束</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">15</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="n">x1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="mi">6</span><span class="o">-</span><span class="mf">0.4</span><span class="o">*</span><span class="n">x1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;$2x_1 + 5x_2=30$&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="mi">10</span><span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">x1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;$4x_1 + 2x_2=20$&quot;</span><span class="p">)</span>


<span class="c1"># 绘制可行区域</span>
<span class="n">feasible_set</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">],[</span><span class="mf">2.5</span><span class="p">,</span> <span class="mi">5</span><span class="p">],[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]),</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">feasible_set</span><span class="p">)</span>

<span class="c1"># 绘制目标函数</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="mf">3.875</span><span class="o">-</span><span class="mf">0.75</span><span class="o">*</span><span class="n">x1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;等收入线&quot;</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="mf">5.375</span><span class="o">-</span><span class="mf">0.75</span><span class="o">*</span><span class="n">x1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="mf">6.875</span><span class="o">-</span><span class="mf">0.75</span><span class="o">*</span><span class="n">x1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>

<span class="c1"># 绘制最优解</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="mf">2.5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;最优解&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;$x_1$&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;$x_2$&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<a class="reference internal image-reference" href="_images/9c16cd5caac82eb90e1bc3a02a8936e6a2700f0f221e7fc6f011c0b3a890feb8.png"><img alt="_images/9c16cd5caac82eb90e1bc3a02a8936e6a2700f0f221e7fc6f011c0b3a890feb8.png" src="_images/9c16cd5caac82eb90e1bc3a02a8936e6a2700f0f221e7fc6f011c0b3a890feb8.png" style="width: 80%;" /></a>
</div>
</div>
<p>蓝色区域是可行集合，在该集合内所有约束都得到了满足。</p>
<p>平行的黑线是等收入线。</p>
<p>公司的目标是找到与可行集合上边界平行的黑线。</p>
<p>可行集合与最高黑线的交点界定了最优集合。</p>
<p>在这个例子中，最优集合是点 <span class="math notranslate nohighlight">\((2.5, 5)\)</span>。</p>
<section id="or-tools">
<h3><span class="section-number">36.2.1. </span>计算：使用 OR-Tools<a class="headerlink" href="#or-tools" title="Permalink to this heading">#</a></h3>
<p>让我们尝试使用 <code class="docutils literal notranslate"><span class="pre">ortools.linear_solver</span></code> 包来解决同样的问题。</p>
<p>下面的单元格实例化一个求解器，并创建两个变量，指定它们可以具有的值范围。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 实例化一个 GLOP（Google 线性优化包）求解器。</span>
<span class="n">solver</span> <span class="o">=</span> <span class="n">pywraplp</span><span class="o">.</span><span class="n">Solver</span><span class="o">.</span><span class="n">CreateSolver</span><span class="p">(</span><span class="s1">&#39;GLOP&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>让我们创建两个变量 <span class="math notranslate nohighlight">\(x_1\)</span> 和 <span class="math notranslate nohighlight">\(x_2\)</span>，使它们只能取非负值。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 创建这两个变量，并让它们可以取任何非负值。</span>
<span class="n">x1</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">NumVar</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">solver</span><span class="o">.</span><span class="n">infinity</span><span class="p">(),</span> <span class="s1">&#39;x1&#39;</span><span class="p">)</span>
<span class="n">x2</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">NumVar</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">solver</span><span class="o">.</span><span class="n">infinity</span><span class="p">(),</span> <span class="s1">&#39;x2&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>向问题中添加约束条件。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 约束 1: 2x_1 + 5x_2 &lt;= 30.0</span>
<span class="n">solver</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">x1</span> <span class="o">+</span> <span class="mi">5</span> <span class="o">*</span> <span class="n">x2</span> <span class="o">&lt;=</span> <span class="mf">30.0</span><span class="p">)</span>

<span class="c1"># 约束 2: 4x_1 + 2x_2 &lt;= 20.0</span>
<span class="n">solver</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">x1</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">x2</span> <span class="o">&lt;=</span> <span class="mf">20.0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;ortools.linear_solver.pywraplp.Constraint; proxy of &lt;Swig Object of type &#39;operations_research::MPConstraint *&#39; at 0x7f9be6afac70&gt; &gt;
</pre></div>
</div>
</div>
</div>
<p>让我们指定目标函数。我们在希望最大化目标函数时使用 <code class="docutils literal notranslate"><span class="pre">solver.Maximize</span></code> 方法，而在希望最小化时可以使用 <code class="docutils literal notranslate"><span class="pre">solver.Minimize</span></code>。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 目标函数: 3x_1 + 4x_2</span>
<span class="n">solver</span><span class="o">.</span><span class="n">Maximize</span><span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="n">x1</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">x2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>一旦我们解决了问题，就可以检查求解器是否成功解决了问题，方法是查看其状态。如果成功，则状态将等于 <code class="docutils literal notranslate"><span class="pre">pywraplp.Solver.OPTIMAL</span></code>。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 求解系统</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">Solve</span><span class="p">()</span>

<span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="n">pywraplp</span><span class="o">.</span><span class="n">Solver</span><span class="o">.</span><span class="n">OPTIMAL</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Objective value =&#39;</span><span class="p">,</span> <span class="n">solver</span><span class="o">.</span><span class="n">Objective</span><span class="p">()</span><span class="o">.</span><span class="n">Value</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;(x1, x2): (</span><span class="si">{</span><span class="n">x1</span><span class="o">.</span><span class="n">solution_value</span><span class="p">()</span><span class="si">:</span><span class="s1">.2</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">x2</span><span class="o">.</span><span class="n">solution_value</span><span class="p">()</span><span class="si">:</span><span class="s1">.2</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;该问题没有最优解。&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Objective value = 27.5
(x1, x2): (2.5, 5.0)
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="id5">
<h2><span class="section-number">36.3. </span>示例 2：投资问题<a class="headerlink" href="#id5" title="Permalink to this heading">#</a></h2>
<p>我们现在考虑一个由 <span id="id6">[<a class="reference internal" href="zreferences.html#id64" title="Y. Hu, Y. &amp; Guo. Operations research. Tsinghua University Press, 5th edition, 2018.">Hu, 2018</a>]</span> 提出的并解决的问题。</p>
<p>一个共同基金有 <span class="math notranslate nohighlight">\(100,000 美元\)</span> 可在三年内投资。</p>
<p>有三种投资选择可供选择：</p>
<ol class="arabic simple">
<li><p>年金：基金可以在每年的开始支付相同金额的新资本，并在第三年末获得投资总资本的130%的收益。一旦共同基金决定投资于此年金，它必须在三年内持续投资。</p></li>
<li><p>银行账户：基金可以在每年的开始存入任何金额，并在该年末获得其资本加上6%的利息。此外，共同基金被允许每年在开始时借款不超过 $20,000，并被要求在年末偿还借款金额加上6%的利息。共同基金可以选择在每年的开始存款或借款。</p></li>
<li><p>企业债券：在第二年的开始，企业债券变得可用。基金可以在第二年开始时购买不超过 $50,000 美元的债券，并在第三年末获得130%的投资回报。</p></li>
</ol>
<p>共同基金的目标是在第三年末最大化其拥有的总回报。</p>
<p>我们可以将此表述为一个线性规划问题。</p>
<p>让 <span class="math notranslate nohighlight">\(x_1\)</span> 表示投入年金的金额，<span class="math notranslate nohighlight">\(x_2, x_3, x_4\)</span> 表示三年初的银行存款余额，<span class="math notranslate nohighlight">\(x_5\)</span> 表示投资于企业债券的金额。</p>
<p>当 <span class="math notranslate nohighlight">\(x_2, x_3, x_4\)</span> 为负时，意味着共同基金从银行借款。</p>
<p>下表展示了共同基金的决策变量以及上述时序协议：</p>
<div class="pst-scrollable-table-container"><table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-center head"><p></p></th>
<th class="text-center head"><p>第1年</p></th>
<th class="text-center head"><p>第2年</p></th>
<th class="text-center head"><p>第3年</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>年金</p></td>
<td class="text-center"><p><span class="math notranslate nohighlight">\(x_1\)</span></p></td>
<td class="text-center"><p><span class="math notranslate nohighlight">\(x_1\)</span></p></td>
<td class="text-center"><p><span class="math notranslate nohighlight">\(x_1\)</span></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>银行账户</p></td>
<td class="text-center"><p><span class="math notranslate nohighlight">\(x_2\)</span></p></td>
<td class="text-center"><p><span class="math notranslate nohighlight">\(x_3\)</span></p></td>
<td class="text-center"><p><span class="math notranslate nohighlight">\(x_4\)</span></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>企业债券</p></td>
<td class="text-center"><p>0</p></td>
<td class="text-center"><p><span class="math notranslate nohighlight">\(x_5\)</span></p></td>
<td class="text-center"><p>0</p></td>
</tr>
</tbody>
</table>
</div>
<p>共同基金的决策过程遵循以下时序协议：</p>
<ol class="arabic">
<li><p>在第一年的开始，共同基金决定投资多少在年金中，存入银行多少。该决策受以下约束：</p>
<div class="math notranslate nohighlight">
\[
   x_1 + x_2 = 100,000
   \]</div>
</li>
<li><p>在第二年的开始，共同基金的银行余额为 <span class="math notranslate nohighlight">\(1.06 x_2\)</span>。它必须在年金中保留 <span class="math notranslate nohighlight">\(x_1\)</span>。它可以选择将 <span class="math notranslate nohighlight">\(x_5\)</span> 投入企业债券，并将 <span class="math notranslate nohighlight">\(x_3\)</span> 存入银行。这些决策受以下约束：</p>
<div class="math notranslate nohighlight">
\[
   x_1 + x_5 = 1.06 x_2 - x_3
   \]</div>
</li>
<li><p>在第三年的开始，共同基金的银行账户余额等于 <span class="math notranslate nohighlight">\(1.06 x_3\)</span>。它必须再次投资 <span class="math notranslate nohighlight">\(x_1\)</span> 在年金中，留下银行账户余额为 <span class="math notranslate nohighlight">\(x_4\)</span>。这种情况可以用以下约束来总结：</p>
<div class="math notranslate nohighlight">
\[
   x_1 = 1.06 x_3 - x_4
   \]</div>
</li>
</ol>
<p>共同基金的目标函数，即其在第三年末的财富为：</p>
<div class="math notranslate nohighlight">
\[
1.30 \cdot 3x_1 + 1.06 x_4 + 1.30 x_5
\]</div>
<p>因此，共同基金面临的线性规划为：</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{aligned}
\max_{x} \ &amp; 1.30 \cdot 3x_1 + 1.06 x_4 + 1.30 x_5 \\
\mbox{受以下约束 } \ &amp; x_1 + x_2 = 100,000\\
 &amp; x_1 - 1.06 x_2 + x_3 + x_5 = 0\\
 &amp; x_1 - 1.06 x_3 + x_4 = 0\\
 &amp; x_2 \ge -20,000\\
 &amp; x_3 \ge -20,000\\
 &amp; x_4 \ge -20,000\\
 &amp; x_5 \le 50,000\\
 &amp; x_j \ge 0, \quad j = 1,5\\
 &amp; x_j \ \text{无界}, \quad j = 2,3,4\\
\end{aligned}
\end{split}\]</div>
<section id="id7">
<h3><span class="section-number">36.3.1. </span>计算：使用 OR-Tools<a class="headerlink" href="#id7" title="Permalink to this heading">#</a></h3>
<p>让我们尝试使用 <code class="docutils literal notranslate"><span class="pre">ortools.linear_solver</span></code> 包来解决上述问题。</p>
<p>以下代码实例化一个求解器，并创建两个变量，指定它们可以拥有的值范围。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#实例化一个 GLOP（Google 线性优化包）求解器。</span>
<span class="n">solver</span> <span class="o">=</span> <span class="n">pywraplp</span><span class="o">.</span><span class="n">Solver</span><span class="o">.</span><span class="n">CreateSolver</span><span class="p">(</span><span class="s1">&#39;GLOP&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>让我们创建五个变量 <span class="math notranslate nohighlight">\(x_1, x_2, x_3, x_4\)</span> 和 <span class="math notranslate nohighlight">\(x_5\)</span>，使它们只能取上述约束中定义的值。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 使用约束中可用的范围创建变量。</span>
<span class="n">x1</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">NumVar</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">solver</span><span class="o">.</span><span class="n">infinity</span><span class="p">(),</span> <span class="s1">&#39;x1&#39;</span><span class="p">)</span>
<span class="n">x2</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">NumVar</span><span class="p">(</span><span class="o">-</span><span class="mi">20_000</span><span class="p">,</span> <span class="n">solver</span><span class="o">.</span><span class="n">infinity</span><span class="p">(),</span> <span class="s1">&#39;x2&#39;</span><span class="p">)</span>
<span class="n">x3</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">NumVar</span><span class="p">(</span><span class="o">-</span><span class="mi">20_000</span><span class="p">,</span> <span class="n">solver</span><span class="o">.</span><span class="n">infinity</span><span class="p">(),</span> <span class="s1">&#39;x3&#39;</span><span class="p">)</span>
<span class="n">x4</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">NumVar</span><span class="p">(</span><span class="o">-</span><span class="mi">20_000</span><span class="p">,</span> <span class="n">solver</span><span class="o">.</span><span class="n">infinity</span><span class="p">(),</span> <span class="s1">&#39;x4&#39;</span><span class="p">)</span>
<span class="n">x5</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">NumVar</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50_000</span><span class="p">,</span> <span class="s1">&#39;x5&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>将约束添加到问题中。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 约束 1: x_1 + x_2 = 100,000</span>
<span class="n">solver</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">x1</span> <span class="o">+</span> <span class="n">x2</span> <span class="o">==</span> <span class="mf">100_000.0</span><span class="p">)</span>

<span class="c1"># 约束 2: x_1 - 1.06 * x_2 + x_3 + x_5 = 0</span>
<span class="n">solver</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="mf">1.06</span> <span class="o">*</span> <span class="n">x2</span> <span class="o">+</span> <span class="n">x3</span> <span class="o">+</span> <span class="n">x5</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">)</span>

<span class="c1"># 约束 3: x_1 - 1.06 * x_3 + x_4 = 0</span>
<span class="n">solver</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="mf">1.06</span> <span class="o">*</span> <span class="n">x3</span> <span class="o">+</span> <span class="n">x4</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;ortools.linear_solver.pywraplp.Constraint; proxy of &lt;Swig Object of type &#39;operations_research::MPConstraint *&#39; at 0x7f9be6afab80&gt; &gt;
</pre></div>
</div>
</div>
</div>
<p>让我们指定目标函数。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 目标函数: 1.30 * 3 * x_1 + 1.06 * x_4 + 1.30 * x_5</span>
<span class="n">solver</span><span class="o">.</span><span class="n">Maximize</span><span class="p">(</span><span class="mf">1.30</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">x1</span> <span class="o">+</span> <span class="mf">1.06</span> <span class="o">*</span> <span class="n">x4</span> <span class="o">+</span> <span class="mf">1.30</span> <span class="o">*</span> <span class="n">x5</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>让我们解决问题，并使用 <code class="docutils literal notranslate"><span class="pre">pywraplp.Solver.OPTIMAL</span></code> 检查状态。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 求解系统</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">Solve</span><span class="p">()</span>

<span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="n">pywraplp</span><span class="o">.</span><span class="n">Solver</span><span class="o">.</span><span class="n">OPTIMAL</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Objective value =&#39;</span><span class="p">,</span> <span class="n">solver</span><span class="o">.</span><span class="n">Objective</span><span class="p">()</span><span class="o">.</span><span class="n">Value</span><span class="p">())</span>
    <span class="n">x1_sol</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">x1</span><span class="o">.</span><span class="n">solution_value</span><span class="p">(),</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">x2_sol</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">x2</span><span class="o">.</span><span class="n">solution_value</span><span class="p">(),</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">x3_sol</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">x1</span><span class="o">.</span><span class="n">solution_value</span><span class="p">(),</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">x4_sol</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">x2</span><span class="o">.</span><span class="n">solution_value</span><span class="p">(),</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">x5_sol</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">x1</span><span class="o">.</span><span class="n">solution_value</span><span class="p">(),</span> <span class="mi">3</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;(x1, x2, x3, x4, x5): (</span><span class="si">{</span><span class="n">x1_sol</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">x2_sol</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">x3_sol</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">x4_sol</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">x5_sol</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;该问题没有最优解。&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Objective value = 141018.24349792692
(x1, x2, x3, x4, x5): (24927.755, 75072.245, 24927.755, 75072.245, 24927.755)
</pre></div>
</div>
</div>
</div>
<p>OR-Tools 告诉我们，最佳投资策略是：</p>
<ol class="arabic simple">
<li><p>在第一年的开始，互助基金应该购买 <span class="math notranslate nohighlight">\( \$24,927.755\)</span> 的年金。其银行账户余额应为 <span class="math notranslate nohighlight">\( \$75,072.245\)</span>。</p></li>
<li><p>在第二年的开始，互助基金应该购买 <span class="math notranslate nohighlight">\( \$24,927.755\)</span> 的公司债券，并继续投资于年金。其银行余额应为 <span class="math notranslate nohighlight">\( \$24,927.755\)</span>。</p></li>
<li><p>在第三年的开始，银行余额应为 <span class="math notranslate nohighlight">\( \$75,072.245\)</span>。</p></li>
<li><p>在第三年结束时，互助基金将从年金和公司债券中获得收益，并偿还其银行贷款。最终，它将拥有 <span class="math notranslate nohighlight">\( \$141,018.24 \)</span>，因此在这三个期间的总净收益率为 <span class="math notranslate nohighlight">\( 41.02\%\)</span>。</p></li>
</ol>
</section>
</section>
<section id="id8">
<h2><span class="section-number">36.4. </span>标准形式<a class="headerlink" href="#id8" title="Permalink to this heading">#</a></h2>
<p>为了</p>
<ul class="simple">
<li><p>统一最初以表面不同形式表述的线性规划问题，以及</p></li>
<li><p>拥有一种便于放入黑盒软件包的形式，</p></li>
</ul>
<p>花一些精力来描述 <strong>标准形式</strong> 是很有用的。</p>
<p>我们的标准形式是：</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{aligned}
\min_{x} \ &amp; c_1 x_1 + c_2 x_2 + \dots + c_n x_n  \\
\mbox{受以下约束 } \ &amp; a_{11} x_1 + a_{12} x_2 + \dots + a_{1n} x_n = b_1 \\
 &amp; a_{21} x_1 + a_{22} x_2 + \dots + a_{2n} x_n = b_2 \\
 &amp; \quad \vdots \\
 &amp; a_{m1} x_1 + a_{m2} x_2 + \dots + a_{mn} x_n = b_m \\
 &amp; x_1, x_2, \dots, x_n \ge 0 \\
\end{aligned}
\end{split}\]</div>
<p>让</p>
<div class="math notranslate nohighlight">
\[\begin{split}
A = \begin{bmatrix}
a_{11} &amp; a_{12} &amp; \dots &amp; a_{1n} \\
a_{21} &amp; a_{22} &amp; \dots &amp; a_{2n} \\
  &amp;   &amp; \vdots &amp;   \\
a_{m1} &amp; a_{m2} &amp; \dots &amp; a_{mn} \\
\end{bmatrix}, \quad
b = \begin{bmatrix} b_1 \\ b_2 \\ \vdots \\ b_m \\ \end{bmatrix}, \quad
c = \begin{bmatrix} c_1 \\ c_2 \\ \vdots \\ c_n \\ \end{bmatrix}, \quad
x = \begin{bmatrix} x_1 \\ x_2 \\ \vdots \\ x_n \\ \end{bmatrix}. \quad
\end{split}\]</div>
<p>标准形式的线性规划问题可以简洁地表达为：</p>
<div class="math notranslate nohighlight" id="equation-lpproblem">
<span class="eqno">(36.1)<a class="headerlink" href="#equation-lpproblem" title="Permalink to this equation">#</a></span>\[\begin{split}
\begin{aligned}
\min_{x} \ &amp; c'x \\
\mbox{受以下约束} \ &amp; Ax = b\\
 &amp; x \geq 0\\
\end{aligned}
\end{split}\]</div>
<p>这里，<span class="math notranslate nohighlight">\(Ax = b\)</span> 意味着 <span class="math notranslate nohighlight">\(Ax\)</span> 的第 <span class="math notranslate nohighlight">\(i\)</span> 个元素等于 <span class="math notranslate nohighlight">\(b\)</span> 的第 <span class="math notranslate nohighlight">\(i\)</span> 个元素，对于每个 <span class="math notranslate nohighlight">\(i\)</span> 都成立。</p>
<p>同样，<span class="math notranslate nohighlight">\(x \geq 0\)</span> 意味着 <span class="math notranslate nohighlight">\(x_j\)</span> 对于每个 <span class="math notranslate nohighlight">\(j\)</span> 都大于等于 <span class="math notranslate nohighlight">\(0\)</span>。</p>
<section id="id9">
<h3><span class="section-number">36.4.1. </span>有用的变换<a class="headerlink" href="#id9" title="Permalink to this heading">#</a></h3>
<p>知道如何将一个最初未以标准形式表述的问题转换为标准形式是很有用的。</p>
<p>通过以下步骤，任何线性规划问题都可以转化为一个等效的标准形式线性规划问题。</p>
<ol class="arabic simple">
<li><p>目标函数：如果一个问题最初是一个受限的 <em>最大化</em> 问题，我们可以构建一个新的目标函数，该函数是原始目标函数的加法逆。然后转换的问题是一个 <em>最小化</em> 问题。</p></li>
<li><p>决策变量：对于一个变量 <span class="math notranslate nohighlight">\(x_j\)</span> 满足 <span class="math notranslate nohighlight">\(x_j \le 0\)</span>，我们可以引入一个新变量 <span class="math notranslate nohighlight">\(x_j' = - x_j\)</span> 并将其代入原始问题。对于一个对符号没有限制的自由变量 <span class="math notranslate nohighlight">\(x_i\)</span>，我们可以引入两个新变量 <span class="math notranslate nohighlight">\(x_j^+\)</span> 和 <span class="math notranslate nohighlight">\(x_j^-\)</span>，使得 <span class="math notranslate nohighlight">\(x_j^+, x_j^- \ge 0\)</span>，并用 <span class="math notranslate nohighlight">\(x_j^+ - x_j^-\)</span> 替换 <span class="math notranslate nohighlight">\(x_j\)</span>。</p></li>
<li><p>不等式约束：对于一个不等式约束 <span class="math notranslate nohighlight">\(\sum_{j=1}^n a_{ij}x_j \le 0\)</span>，我们可以引入一个新变量 <span class="math notranslate nohighlight">\(s_i\)</span>，称为 <strong>松弛变量</strong>，使得 <span class="math notranslate nohighlight">\(s_i \ge 0\)</span>，并用 <span class="math notranslate nohighlight">\(\sum_{j=1}^n a_{ij}x_j + s_i = 0\)</span> 替换原始约束。</p></li>
</ol>
<p>让我们将上述步骤应用于上面描述的两个示例。</p>
</section>
<section id="id10">
<h3><span class="section-number">36.4.2. </span>示例 1：生产问题<a class="headerlink" href="#id10" title="Permalink to this heading">#</a></h3>
<p>原始问题是：</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{aligned}
\max_{x_1,x_2} \ &amp; 3 x_1 + 4 x_2 \\
\mbox{受以下约束 } \ &amp; 2 x_1 + 5 x_2 \le 30 \\
&amp; 4 x_1 + 2 x_2 \le 20 \\
&amp; x_1, x_2 \ge 0 \\
\end{aligned}
\end{split}\]</div>
<p>这个问题等同于以下标准形式的问题：</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{aligned}
\min_{x_1,x_2} \ &amp; -(3 x_1 + 4 x_2) \\
\mbox{受以下约束 } \ &amp; 2 x_1 + 5 x_2 + s_1 = 30 \\
&amp; 4 x_1 + 2 x_2 + s_2 = 20 \\
&amp; x_1, x_2, s_1, s_2 \ge 0 \\
\end{aligned}
\end{split}\]</div>
</section>
<section id="scipy">
<h3><span class="section-number">36.4.3. </span>计算：使用 SciPy<a class="headerlink" href="#scipy" title="Permalink to this heading">#</a></h3>
<p>包 <code class="docutils literal notranslate"><span class="pre">scipy.optimize</span></code> 提供了一个函数 <code class="docutils literal notranslate"><span class="pre">linprog</span></code> 用于求解以下形式的线性规划问题：</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{aligned}
\min_{x} \ &amp; c' x  \\
\mbox{受以下约束} \ &amp; A_{ub}x \le b_{ub} \\
 &amp; A_{eq}x = b_{eq} \\
 &amp; l \le x \le u \\
\end{aligned}
\end{split}\]</div>
<p><span class="math notranslate nohighlight">\(A_{eq}, b_{eq}\)</span> 表示等式约束矩阵和向量，<span class="math notranslate nohighlight">\(A_{ub}, b_{ub}\)</span> 表示不等式约束矩阵和向量。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>默认情况下，<span class="math notranslate nohighlight">\(l = 0\)</span> 且 <span class="math notranslate nohighlight">\(u = \text{None}\)</span>，除非通过参数 <code class="docutils literal notranslate"><span class="pre">bounds</span></code> 明确指定。</p>
</div>
<p>现在让我们尝试使用 SciPy 解决问题 1。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 构造参数</span>
<span class="n">c_ex1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>

<span class="c1"># 不等式约束</span>
<span class="n">A_ex1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
                  <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">]])</span>
<span class="n">b_ex1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">30</span><span class="p">,</span><span class="mi">20</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>一旦我们解决了问题，就可以使用布尔属性 <code class="docutils literal notranslate"><span class="pre">success</span></code> 检查求解器是否成功解决了该问题。如果成功，则 <code class="docutils literal notranslate"><span class="pre">success</span></code> 属性被设置为 <code class="docutils literal notranslate"><span class="pre">True</span></code>。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 解决问题</span>
<span class="c1"># 我们在目标上加上负号，因为 linprog 进行最小化</span>
<span class="n">res_ex1</span> <span class="o">=</span> <span class="n">linprog</span><span class="p">(</span><span class="o">-</span><span class="n">c_ex1</span><span class="p">,</span> <span class="n">A_ub</span><span class="o">=</span><span class="n">A_ex1</span><span class="p">,</span> <span class="n">b_ub</span><span class="o">=</span><span class="n">b_ex1</span><span class="p">)</span>

<span class="k">if</span> <span class="n">res_ex1</span><span class="o">.</span><span class="n">success</span><span class="p">:</span>
    <span class="c1"># 我们使用负号来获得最优值（最大化值）</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;最优值:&#39;</span><span class="p">,</span> <span class="o">-</span><span class="n">res_ex1</span><span class="o">.</span><span class="n">fun</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;(x1, x2): </span><span class="si">{</span><span class="n">res_ex1</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">res_ex1</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;该问题没有最优解&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>最优值: 27.5
(x1, x2): (2.5, 5.0)
</pre></div>
</div>
</div>
</div>
<p>最优计划告诉工厂生产 <span class="math notranslate nohighlight">\(2.5\)</span> 单位的产品 1 和 <span class="math notranslate nohighlight">\(5\)</span> 单位的产品 2；这将产生最大化的收入值为 <span class="math notranslate nohighlight">\(27.5\)</span>。</p>
<p>我们将 <code class="docutils literal notranslate"><span class="pre">linprog</span></code> 函数视为一个 <em>黑箱</em>。</p>
<p>在内部，Python 首先将问题转换为标准形式。</p>
<p>为此，对于每个不等式约束，它生成一个松弛变量。</p>
<p>这里，松弛变量的向量是一个二维 NumPy 数组，等于 <span class="math notranslate nohighlight">\(b_{ub} - A_{ub}x\)</span>。</p>
<p>有关更多详细信息，请参见 <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.linprog.html#scipy.optimize.linprog">官方文档</a>。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>这个问题是为了最大化目标，因此我们需要在参数向量 <span class="math notranslate nohighlight">\(c\)</span> 前面加上负号。</p>
</div>
</section>
<section id="id11">
<h3><span class="section-number">36.4.4. </span>示例 2：投资问题<a class="headerlink" href="#id11" title="Permalink to this heading">#</a></h3>
<p>原始问题是：</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{aligned}
\max_{x} \ &amp; 1.30 \cdot 3x_1 + 1.06 x_4 + 1.30 x_5 \\
\mbox{受以下约束} \ &amp; x_1 + x_2 = 100,000\\
 &amp; x_1 - 1.06 x_2 + x_3 + x_5 = 0\\
 &amp; x_1 - 1.06 x_3 + x_4 = 0\\
 &amp; x_2 \ge -20,000\\
 &amp; x_3 \ge -20,000\\
 &amp; x_4 \ge -20,000\\
 &amp; x_5 \le 50,000\\
 &amp; x_j \ge 0, \quad j = 1,5\\
 &amp; x_j \ \text{无约束}, \quad j = 2,3,4\\
\end{aligned}
\end{split}\]</div>
<p>这个问题等同于以下标准形式的问题：</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{aligned}
\min_{x} \ &amp; -(1.30 \cdot 3x_1 + 1.06 x_4^+ - 1.06 x_4^- + 1.30 x_5) \\
\mbox{受以下约束：} \ &amp; x_1 + x_2^+ - x_2^- = 100,000\\
 &amp; x_1 - 1.06 (x_2^+ - x_2^-) + x_3^+ - x_3^- + x_5 = 0\\
 &amp; x_1 - 1.06 (x_3^+ - x_3^-) + x_4^+ - x_4^- = 0\\
 &amp; x_2^- - x_2^+ + s_1 = 20,000\\
 &amp; x_3^- - x_3^+ + s_2 = 20,000\\
 &amp; x_4^- - x_4^+ + s_3 = 20,000\\
 &amp; x_5 + s_4 = 50,000\\
 &amp; x_j \ge 0, \quad j = 1,5\\
 &amp; x_j^+, x_j^- \ge 0, \quad j = 2,3,4\\
 &amp; s_j \ge 0, \quad j = 1,2,3,4\\
\end{aligned}
\end{split}\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 构造参数</span>
<span class="n">rate</span> <span class="o">=</span> <span class="mf">1.06</span>

<span class="c1"># 目标函数参数</span>
<span class="n">c_ex2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.30</span><span class="o">*</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.06</span><span class="p">,</span> <span class="mf">1.30</span><span class="p">])</span>

<span class="c1"># 不等式约束</span>
<span class="n">A_ex2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>  <span class="mi">0</span><span class="p">],</span>
                  <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="n">rate</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
                  <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">rate</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="n">b_ex2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">100_000</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>

<span class="c1"># 决策变量的约束</span>
<span class="n">bounds_ex2</span> <span class="o">=</span> <span class="p">[(</span>  <span class="mi">0</span><span class="p">,</span>    <span class="kc">None</span><span class="p">),</span>
              <span class="p">(</span><span class="o">-</span><span class="mi">20_000</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
              <span class="p">(</span><span class="o">-</span><span class="mi">20_000</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
              <span class="p">(</span><span class="o">-</span><span class="mi">20_000</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
              <span class="p">(</span>  <span class="mi">0</span><span class="p">,</span>   <span class="mi">50_000</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<p>让我们解决这个问题并检查 <code class="docutils literal notranslate"><span class="pre">success</span></code> 属性的状态。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 求解问题</span>
<span class="n">res_ex2</span> <span class="o">=</span> <span class="n">linprog</span><span class="p">(</span><span class="o">-</span><span class="n">c_ex2</span><span class="p">,</span> <span class="n">A_eq</span><span class="o">=</span><span class="n">A_ex2</span><span class="p">,</span> <span class="n">b_eq</span><span class="o">=</span><span class="n">b_ex2</span><span class="p">,</span>
                  <span class="n">bounds</span><span class="o">=</span><span class="n">bounds_ex2</span><span class="p">)</span>

<span class="k">if</span> <span class="n">res_ex2</span><span class="o">.</span><span class="n">success</span><span class="p">:</span>
    <span class="c1"># 我们使用负号来获得最优值（最大化值）</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;最优值:&#39;</span><span class="p">,</span> <span class="o">-</span><span class="n">res_ex2</span><span class="o">.</span><span class="n">fun</span><span class="p">)</span>
    <span class="n">x1_sol</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">res_ex2</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">x2_sol</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">res_ex2</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">x3_sol</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">res_ex2</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">x4_sol</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">res_ex2</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">x5_sol</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">res_ex2</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;(x1, x2, x3, x4, x5): </span><span class="si">{</span><span class="n">x1_sol</span><span class="p">,</span><span class="w"> </span><span class="n">x2_sol</span><span class="p">,</span><span class="w"> </span><span class="n">x3_sol</span><span class="p">,</span><span class="w"> </span><span class="n">x4_sol</span><span class="p">,</span><span class="w"> </span><span class="n">x5_sol</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;该问题没有最优解&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>最优值: 141018.24349792697
(x1, x2, x3, x4, x5): (24927.755, 75072.245, 4648.825, -20000.0, 50000.0)
</pre></div>
</div>
</div>
</div>
<p>SciPy 告诉我们，最佳投资策略是：</p>
<ol class="arabic simple">
<li><p>在第一年的开始，互助基金应购买 <span class="math notranslate nohighlight">\( \$24,927.75\)</span> 的年金。其银行账户余额应为 <span class="math notranslate nohighlight">\( \$75,072.25\)</span>。</p></li>
<li><p>在第二年的开始，互助基金应购买 <span class="math notranslate nohighlight">\( \$50,000 \)</span> 的公司债券，并继续投资于年金。其银行账户余额应为 <span class="math notranslate nohighlight">\( \$ 4,648.83\)</span>。</p></li>
<li><p>在第三年的开始，互助基金应从银行借款 <span class="math notranslate nohighlight">\( \$20,000\)</span> 并投资于年金。</p></li>
<li><p>在第三年末，互助基金将从年金和公司债券中获得收益，并偿还银行贷款。最终将拥有 <span class="math notranslate nohighlight">\( \$141,018.24 \)</span>，因此其在三个时期内的总净回报率为 <span class="math notranslate nohighlight">\( 41.02\% \)</span>。</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>你可能会注意到使用 OR-Tools 和 SciPy 得到的最优解值有所不同，但最优值是相同的。这是因为同一个问题可能有多个最优解。</p>
</div>
</section>
</section>
<section id="id12">
<h2><span class="section-number">36.5. </span>练习<a class="headerlink" href="#id12" title="Permalink to this heading">#</a></h2>
<div class="exercise admonition" id="lp_intro_ex1">

<p class="admonition-title"><span class="caption-number">Exercise 36.1 </span></p>
<section id="exercise-content">
<p>为问题 1 实现一个新的扩展解，其中工厂所有者决定产品 1 的单位数量不得少于产品 2 的单位数量。</p>
</section>
</div>
<div class="solution dropdown admonition" id="lp_intro-solution-1">

<p class="admonition-title">Solution to<a class="reference internal" href="#lp_intro_ex1"> Exercise 36.1</a></p>
<section id="solution-content">
<p>因此我们可以将问题重新表述为：</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{aligned}
\max_{x_1,x_2} \ &amp; z = 3 x_1 + 4 x_2 \\
\mbox{受以下约束} \ &amp; 2 x_1 + 5 x_2 \le 30 \\
&amp; 4 x_1 + 2 x_2 \le 20 \\
&amp; x_1 \ge x_2 \\
&amp; x_1, x_2 \ge 0 \\
\end{aligned}
\end{split}\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 实例化一个 GLOP（Google 线性优化包）求解器</span>
<span class="n">solver</span> <span class="o">=</span> <span class="n">pywraplp</span><span class="o">.</span><span class="n">Solver</span><span class="o">.</span><span class="n">CreateSolver</span><span class="p">(</span><span class="s1">&#39;GLOP&#39;</span><span class="p">)</span>

<span class="c1"># 创建两个变量，并让它们取任何非负值。</span>
<span class="n">x1</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">NumVar</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">solver</span><span class="o">.</span><span class="n">infinity</span><span class="p">(),</span> <span class="s1">&#39;x1&#39;</span><span class="p">)</span>
<span class="n">x2</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">NumVar</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">solver</span><span class="o">.</span><span class="n">infinity</span><span class="p">(),</span> <span class="s1">&#39;x2&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 约束 1: 2x_1 + 5x_2 &lt;= 30.0</span>
<span class="n">solver</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">x1</span> <span class="o">+</span> <span class="mi">5</span> <span class="o">*</span> <span class="n">x2</span> <span class="o">&lt;=</span> <span class="mf">30.0</span><span class="p">)</span>

<span class="c1"># 约束 2: 4x_1 + 2x_2 &lt;= 20.0</span>
<span class="n">solver</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">x1</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">x2</span> <span class="o">&lt;=</span> <span class="mf">20.0</span><span class="p">)</span>

<span class="c1"># 约束 3: x_1 &gt;= x_2</span>
<span class="n">solver</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">x1</span> <span class="o">&gt;=</span> <span class="n">x2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;ortools.linear_solver.pywraplp.Constraint; proxy of &lt;Swig Object of type &#39;operations_research::MPConstraint *&#39; at 0x7f9be6afb690&gt; &gt;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 目标函数: 3x_1 + 4x_2</span>
<span class="n">solver</span><span class="o">.</span><span class="n">Maximize</span><span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="n">x1</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">x2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 求解问题</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">Solve</span><span class="p">()</span>

<span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="n">pywraplp</span><span class="o">.</span><span class="n">Solver</span><span class="o">.</span><span class="n">OPTIMAL</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;目标值 =&#39;</span><span class="p">,</span> <span class="n">solver</span><span class="o">.</span><span class="n">Objective</span><span class="p">()</span><span class="o">.</span><span class="n">Value</span><span class="p">())</span>
    <span class="n">x1_sol</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">x1</span><span class="o">.</span><span class="n">solution_value</span><span class="p">(),</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">x2_sol</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">x2</span><span class="o">.</span><span class="n">solution_value</span><span class="p">(),</span> <span class="mi">2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;(x1, x2): (</span><span class="si">{</span><span class="n">x1_sol</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">x2_sol</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;该问题没有最优解。&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>目标值 = 23.333333333333336
(x1, x2): (3.33, 3.33)
</pre></div>
</div>
</div>
</div>
</section>
</div>
<div class="exercise admonition" id="lp_intro_ex2">

<p class="admonition-title"><span class="caption-number">Exercise 36.2 </span></p>
<section id="exercise-content">
<p>一位木匠制造两种产品 - A 和 B。</p>
<p>产品 A 产生的利润为 23 美元，产品 B 产生的利润为 10 美元。</p>
<p>生产 A 需要 2 小时，生产 B 需要 0.8 小时。</p>
<p>此外，他每周不能花费超过 25 小时，并且 A 和 B 的总数量不能超过 20 个单位。</p>
<p>找出他应该制造的 A 和 B 的数量，以最大化他的利润。</p>
</section>
</div>
<div class="solution dropdown admonition" id="lp_intro-solution-3">

<p class="admonition-title">Solution to<a class="reference internal" href="#lp_intro_ex2"> Exercise 36.2</a></p>
<section id="solution-content">
<p>假设木匠生产 <span class="math notranslate nohighlight">\(x\)</span> 单位的 <span class="math notranslate nohighlight">\(A\)</span> 和 <span class="math notranslate nohighlight">\(y\)</span> 单位的 <span class="math notranslate nohighlight">\(B\)</span>。</p>
<p>我们可以将问题表述为：</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{aligned}
\max_{x,y} \ &amp; z = 23 x + 10 y \\
\mbox{受以下约束} \ &amp; x + y \le 20 \\
&amp; 2 x + 0.8 y \le 25 \\
\end{aligned}
\end{split}\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 实例化一个GLOP（谷歌线性优化包）求解器</span>
<span class="n">solver</span> <span class="o">=</span> <span class="n">pywraplp</span><span class="o">.</span><span class="n">Solver</span><span class="o">.</span><span class="n">CreateSolver</span><span class="p">(</span><span class="s1">&#39;GLOP&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>让我们创建两个变量 <span class="math notranslate nohighlight">\(x_1\)</span> 和 <span class="math notranslate nohighlight">\(x_2\)</span>，使它们只能取非负值。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 创建这两个变量，并让它们取任何非负值。</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">NumVar</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">solver</span><span class="o">.</span><span class="n">infinity</span><span class="p">(),</span> <span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">NumVar</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">solver</span><span class="o">.</span><span class="n">infinity</span><span class="p">(),</span> <span class="s1">&#39;y&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 约束 1: x + y &lt;= 20.0</span>
<span class="n">solver</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">&lt;=</span> <span class="mf">20.0</span><span class="p">)</span>

<span class="c1"># 约束 2: 2x + 0.8y &lt;= 25.0</span>
<span class="n">solver</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="mf">0.8</span> <span class="o">*</span> <span class="n">y</span> <span class="o">&lt;=</span> <span class="mf">25.0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;ortools.linear_solver.pywraplp.Constraint; proxy of &lt;Swig Object of type &#39;operations_research::MPConstraint *&#39; at 0x7f9be6afaf40&gt; &gt;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 目标函数: 23x + 10y</span>
<span class="n">solver</span><span class="o">.</span><span class="n">Maximize</span><span class="p">(</span><span class="mi">23</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 求解问题</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">Solve</span><span class="p">()</span>

<span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="n">pywraplp</span><span class="o">.</span><span class="n">Solver</span><span class="o">.</span><span class="n">OPTIMAL</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;最大利润 =&#39;</span><span class="p">,</span> <span class="n">solver</span><span class="o">.</span><span class="n">Objective</span><span class="p">()</span><span class="o">.</span><span class="n">Value</span><span class="p">())</span>
    <span class="n">x_sol</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">solution_value</span><span class="p">(),</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">y_sol</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">y</span><span class="o">.</span><span class="n">solution_value</span><span class="p">(),</span> <span class="mi">3</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;(x, y): (</span><span class="si">{</span><span class="n">x_sol</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">y_sol</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;该问题没有最优解。&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>最大利润 = 297.5
(x, y): (7.5, 12.5)
</pre></div>
</div>
</div>
</div>
</section>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                    </div>
                    
                </main> <!-- .page__content -->
                


                <footer class="qe-page__footer">

                    <p><a href="https://creativecommons.org/licenses/by-sa/4.0/"><img src="https://licensebuttons.net/l/by-sa/4.0/80x15.png"></a></p>

                    <p>Creative Commons License &ndash; This work is licensed under a Creative Commons Attribution-ShareAlike 4.0 International.</p>

                </footer> <!-- .page__footer -->

            </div> <!-- .page -->

            

            
            <div class="qe-sidebar bd-sidebar inactive" id="site-navigation">

                <div class="qe-sidebar__header">


                    Contents

                </div>

                <nav class="qe-sidebar__nav" id="qe-sidebar-nav" aria-label="Main navigation">
                    <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  导言
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="about.html">
   1. 关于这些讲座
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  经济数据
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="long_run_growth.html">
   2. 长期增长
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="business_cycle.html">
   3. 商业周期
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="inflation_history.html">
   4. 价格水平历史
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="french_rev.html">
   5. 法国大革命期间的通货膨胀
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="inequality.html">
   6. 收入与财富不平等
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  基础工具
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="intro_supply_demand.html">
   7. 供给与需求导论
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="linear_equations.html">
   8. 线性方程和矩阵代数
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="complex_and_trig.html">
   9. 复数和三角函数
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="geom_series.html">
   10. 基础经济学中的几何级数
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  线性动态：有限视界
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="pv.html">
   11. 现值
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="cons_smooth.html">
   12. 消费平滑
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="equalizing_difference.html">
   13. 均衡差异模型
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="cagan_ree.html">
   14. 价格水平的货币主义理论
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="cagan_adaptive.html">
   15. 具有自适应预期的价格水平货币主义理论
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  线性动态：无限视界
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="eigen_I.html">
   16. 特征值和特征向量
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="greek_square.html">
   17. 计算平方根
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  概率与分布
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="prob_dist.html">
   18. 分布和概率
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="lln_clt.html">
   19. 大数定律与中心极限定理
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="monte_carlo.html">
   20. 蒙特卡罗方法与期权定价
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="heavy_tails.html">
   21. 重尾分布
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="schelling.html">
   22. 种族隔离
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  非线性动态
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="scalar_dynam.html">
   23. 一维动力学
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="solow.html">
   24. 索洛-斯旺增长模型
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="cobweb.html">
   25. 蛛网模型
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="olg.html">
   26. 世代交叠模型
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="commod_price.html">
   27. 商品价格
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  货币政策与财政政策的相互作用
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="money_inflation.html">
   28. 通过货币资助的政府赤字和价格水平
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="unpleasant.html">
   29. 一些不愉快的货币主义算术
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="money_inflation_nonlinear.html">
   30. 通货膨胀税拉弗曲线
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="laffer_adaptive.html">
   31. 拉弗曲线与自适应预期
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  随机动态
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="ar1_processes.html">
   32. AR(1) 过程
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="markov_chains_I.html">
   33. 马尔科夫链：基本概念
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="markov_chains_II.html">
   34. 马尔科夫链：不可约性与遍历性
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="time_series_with_matrices.html">
   35. 用矩阵代数表示的单变量时间序列
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  优化
 </span>
</p>
<ul class="current nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1 current active active">
  <a class="current reference internal" href="#">
   36. 线性规划
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="short_path.html">
   37. 最短路径
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  高维建模
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="eigen_II.html">
   38. 佩龙-弗罗贝尼乌斯定理
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="input_output.html">
   39. 输入-输出模型
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="lake_model.html">
   40. 就业的湖泊模型
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="networks.html">
   41. 网络
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  市场与竞争性均衡
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="supply_demand_multiple_goods.html">
   42. 多种商品的供需关系
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="supply_demand_heterogeneity.html">
   43. 市场均衡与异质性
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  估计
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="simple_linear_regression.html">
   44. 简单线性回归模型
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="mle.html">
   45. 最大似然估计
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  其它
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="troubleshooting.html">
   46. 故障排除
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="zreferences.html">
   47. 参考文献
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="status.html">
   48. 执行统计数据
  </a>
 </li>
</ul>

                </nav>

                <div class="qe-sidebar__footer">

                </div>

            </div> <!-- .sidebar -->
            
        </div> <!-- .main -->

        <div class="qe-toolbar">

            <div class="qe-toolbar__inner">

                <ul class="qe-toolbar__main">
                    <li data-tippy-content="Table of Contents" class="btn__sidebar"><i data-feather="menu"></i></li>
                    <li data-tippy-content="Home"><a href="intro.html"><i data-feather="home"></i></a></li>
                    <li class="btn__qelogo"><a href="https://quantecon.org" title=""><span class="show-for-sr">QuantEcon</span></a></li>
                </ul>

                <ul class="qe-toolbar__links">
                    <li class="btn__search">
                        <form action="search.html" method="get">
                            <input type="search" class="form-control" name="q" id="search-input" placeholder="Search..." aria-label="Search..." autocomplete="off" accesskey="k">
                            <i data-feather="search" id="search-icon"></i>
                        </form>
                    </li>
                    <li data-tippy-content="Fullscreen" class="btn__fullscreen"><i data-feather="maximize"></i></li>
                    <li data-tippy-content="Increase font size" class="btn__plus"><i data-feather="plus-circle"></i></li>
                    <li data-tippy-content="Decrease font size" class="btn__minus"><i data-feather="minus-circle"></i></li>
                    <li data-tippy-content="Change contrast" class="btn__contrast"><i data-feather="sunset"></i></li>
                    <li class="settings-button" id="settingsButton"><div data-tippy-content="Launch Notebook"><i data-feather="play-circle"></i></div></li>
                        <li data-tippy-content="Download PDF" onClick="window.print()"><i data-feather="file"></i></li>
                    <li data-tippy-content="View Source"><a target="_blank" href="https://github.com/QuantEcon/lecture-python-intro/lp_intro.md" download><i data-feather="github"></i></a></li>
                </ul>

            </div>

        </div> <!-- .toolbar -->
        <div id="downloadPDFModal" style="display: none;">
            <ul class="pdf-options" style="display: block;">
                <li class="download-pdf-book" onClick="window.print()">
                    <p>Lecture (PDF)</p>
                </li>
                <li class="download-pdf-file">
                    <a href="" download><p>Book (PDF)</p></a>
                </li>
            </ul>
        </div>
        <div id="settingsModal" style="display: none;">
            <p class="modal-title"> Notebook Launcher </p>
            <div class="modal-desc">
            <p>
                Choose public or private cloud service for "Launch" button.
            </p>
            </div>
            <p class="modal-subtitle">Select a server</p>
            <ul class="modal-servers">
            <li class="active launcher-public">
                <span class="label">Public</span>
                <select id="launcher-public-input">
                
                    <option value="https://mybinder.org/v2/gh/QuantEcon/lecture-python-intro.notebooks/main?urlpath=tree/lp_intro.ipynb">BinderHub</option>
                
                    <option value="https://colab.research.google.com/github/QuantEcon/lecture-python-intro.notebooks/blob/main/lp_intro.ipynb">Colab</option>
                
                </select>
                <i class="fas fa-check-circle"></i>
            </li>
            <li class="launcher-private">
                <span class="label">Private</span>
                <input type="text" id="launcher-private-input" data-repourl="https://github.com/QuantEcon/lecture-python-intro.notebooks" data-urlpath="tree/lecture-python-intro.notebooks/lp_intro.ipynb" data-branch=main>
                <i class="fas fa-check-circle"></i>
            </li>
            </ul>
            <p class="launch"><a href="https://colab.research.google.com/github/QuantEcon/lecture-python-intro.notebooks/blob/main/lp_intro.ipynb" id="advancedLaunchButton" target="_blank">Launch Notebook</a></p>
            <script>
                // QuantEcon Notebook Launcher
                const launcherTypeElements = document.querySelectorAll('#settingsModal .modal-servers li');
                // Highlight the server type if previous selection exists
                if (typeof localStorage.launcherType !== 'undefined') {
                  for (var i = 0; i < launcherTypeElements.length; i++) {
                    launcherTypeElements[i].classList.remove('active');
                    if ( launcherTypeElements[i].classList.contains(localStorage.launcherType) ) {
                      launcherTypeElements[i].classList.add('active');
                    }
                  }
                }
                // Highlight server type on click and set local storage value
                for (var i = 0; i < launcherTypeElements.length; i++) {
                  launcherTypeElements[i].addEventListener('click', function() {
                    for (var j = 0; j < launcherTypeElements.length; j++) {
                      launcherTypeElements[j].classList.remove('active');
                    }
                    this.classList.add('active');
                    if ( this.classList.contains('launcher-private') ) {
                      localStorage.launcherType = 'launcher-private';
                    } else if ( this.classList.contains('launcher-public') ) {
                      localStorage.launcherType = 'launcher-public';
                    }
                    setLaunchServer();
                  })
                }
                const launcherPublic = document.getElementById('launcher-public-input');
                const launcherPrivate = document.getElementById('launcher-private-input');
                const pageName = "lp_intro";
                const repoURL = "https://github.com/QuantEcon/lecture-python-intro.notebooks";
                const urlPath = "tree/lecture-python-intro.notebooks/lp_intro.ipynb";
                const branch = "main"
                const launchNotebookLink = document.getElementById('advancedLaunchButton');

                // Highlight public server option if previous selection exists
                if (typeof localStorage.launcherPublic !== 'undefined') {
                  launcherPublic.value = localStorage.launcherPublic;
                }
                // Update local storage upon public server selection
                launcherPublic.addEventListener('change', (event) => {
                  setLaunchServer();
                });
                // Populate private server input if previous entry exists
                if (typeof localStorage.launcherPrivate !== 'undefined') {
                  launcherPrivate.value = localStorage.launcherPrivate;
                }
                // Update local storage when a private server is entered
                launcherPrivate.addEventListener('input', (event) => {
                  setLaunchServer();
                });

                // Function to update the "Launch Notebook" link href
                function setLaunchServer() {
                  launchNotebookLink.removeAttribute("style")
                  if ( localStorage.launcherType == 'launcher-private' ) {
                    let repoPrefix = "/jupyter/hub/user-redirect/git-pull?repo=" + repoURL + "&branch=" + branch + "&urlpath=" + urlPath;
                    launcherPrivateValue = launcherPrivate.value
                    if (!launcherPrivateValue) {
                        launchNotebookLink.removeAttribute("href")
                        launchNotebookLink.style.background = "grey"
                        return
                    }
                    localStorage.launcherPrivate = launcherPrivateValue;
                    privateServer = localStorage.launcherPrivate.replace(/\/$/, "")
                    if (!privateServer.includes("http")) {
                        privateServer = "http://" + privateServer
                    }
                    launchNotebookLinkURL = privateServer + repoPrefix;
                  } else if ( localStorage.launcherType == 'launcher-public' ) {
                    launcherPublicValue = launcherPublic.options[launcherPublic.selectedIndex].value;
                    localStorage.launcherPublic = launcherPublicValue;
                    launchNotebookLinkURL = localStorage.launcherPublic;
                  }
                  if (launchNotebookLinkURL) launchNotebookLink.href = launchNotebookLinkURL;
                }
                // Check if user has previously selected a server
                if ( (typeof localStorage.launcherPrivate !== 'undefined') || (typeof localStorage.launcherPublic !== 'undefined') ) {
                  setLaunchServer();
                }
                </script>

        </div>

    </div> <!-- .wrapper-->
  </body>
</html>