

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>45. 网络 &#8212; A First Course in Quantitative Economics with Python</title>
    <script src="https://unpkg.com/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://unpkg.com/tippy.js@6.3.1/dist/tippy-bundle.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    
        <script>
            MathJax = {
            loader: {load: ['[tex]/boldsymbol', '[tex]/textmacros']},
            tex: {
                packages: {'[+]': ['boldsymbol', 'textmacros']},
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                processEscapes: true,
                macros: {
                    "argmax" : "arg\\,max",
                    "argmin" : "arg\\,min",
                    "col"    : "col",
                    "Span"   :  "span",
                    "epsilon": "\\varepsilon",
                    "EE": "\\mathbb{E}",
                    "PP": "\\mathbb{P}",
                    "RR": "\\mathbb{R}",
                    "NN": "\\mathbb{N}",
                    "ZZ": "\\mathbb{Z}",
                    "aA": "\\mathcal{A}",
                    "bB": "\\mathcal{B}",
                    "cC": "\\mathcal{C}",
                    "dD": "\\mathcal{D}",
                    "eE": "\\mathcal{E}",
                    "fF": "\\mathcal{F}",
                    "gG": "\\mathcal{G}",
                    "hH": "\\mathcal{H}",
                }
            },
            svg: {
                fontCache: 'global',
                scale: 0.92,
                displayAlign: "center",
            },
            };
        </script>
    
    
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/quantecon-book-theme.css?digest=f77998adf44a3f900caaca31caf410c810f6f245" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/exercise.css" />
    <link rel="stylesheet" type="text/css" href="_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>


    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/scripts/quantecon-book-theme.js?digest=eed9c059a3ee152aae2353ec732f0a6d12e6aa07"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-QDS1YRJNGM"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-QDS1YRJNGM');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"tex": {"macros": {"argmax": "arg\\,max", "argmin": "arg\\,min"}}, "options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'networks';</script>
    <link rel="canonical" href="https://intro-cn.quantecon.org/networks.html" />
    <link rel="shortcut icon" href="_static/lectures-favicon.ico"/>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="46. 多种商品的供需关系" href="supply_demand_multiple_goods.html" />
    <link rel="prev" title="44. 就业的湖泊模型" href="lake_model.html" />

<!-- Normal Meta Tags -->
<meta name="author" context="Thomas J. Sargent &amp; John Stachurski" />
<meta name="keywords" content="Python, QuantEcon, Quantitative Economics, Economics, Sloan, Alfred P. Sloan Foundation, Tom J. Sargent, John Stachurski" />
<meta name="description" content=This website presents introductory lectures on computational economics, designed and written by Thomas J. Sargent and John Stachurski. />

<!-- Twitter tags -->
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@quantecon" />
<meta name="twitter:title" content="网络"/>
<meta name="twitter:description" content="This website presents introductory lectures on computational economics, designed and written by Thomas J. Sargent and John Stachurski.">
<meta name="twitter:creator" content="@quantecon">
<meta name="twitter:image" content="https://assets.quantecon.org/img/qe-twitter-logo.png">

<!-- Opengraph tags -->
<meta property="og:title" content="网络" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://intro-cn.quantecon.org/networks.html" />
<meta property="og:image" content="https://assets.quantecon.org/img/qe-og-logo.png" />
<meta property="og:description" content="This website presents introductory lectures on computational economics, designed and written by Thomas J. Sargent and John Stachurski." />
<meta property="og:site_name" content="A First Course in Quantitative Economics with Python" />
<meta name="theme-color" content="#ffffff" />

  </head>
<body>


    <span id="top"></span>

    <div class="qe-wrapper">

        <div class="qe-main">

            <div class="qe-page" id=networks>

                <div class="qe-page__toc">

                    <div class="inner">

                        
                        <div class="qe-page__toc-header">
                            On this page
                        </div>


                        <nav id="bd-toc-nav" class="qe-page__toc-nav">
                            <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">45.1. 概述</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">45.2. 经济和金融网络</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">45.2.1. 例子：飞机出口</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">45.2.2. 例子：马尔可夫链</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">45.3. 图论简介</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">45.3.1. 关键定义</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#networkx">45.3.2. Networkx中的有向图</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#strongly-connected">45.3.3. 通信</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">45.4. 加权图</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">45.4.1. 按国家划分的国际私人信贷流动</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">45.4.2. 定义</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">45.5. 邻接矩阵</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">45.6. 网络中心性</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">45.6.1. 度中心性</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">45.7. 特征向量中心性</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">45.7.1. 卡茨中心性</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">45.7.2. 权威与枢纽</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">45.8. 进一步阅读</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id27">45.9. 练习</a></li>
</ul>
                            <p class="logo">
                                
                                    
                                    <a href=https://quantecon.org><img src="_static/qe-logo.png" class="logo logo-img" alt="logo"></a>
                                    
                                    <a href=https://quantecon.org><img src="_static/quantecon-logo-transparent.png" class="dark-logo-img" alt="logo"></a>
                                    
                                    
                                
                            </p>

                            <p class="powered">Powered by <a href="https://jupyterbook.org/">Jupyter Book</a></p>

                        </nav>

                        <div class="qe-page__toc-footer">
                            
                            
                            <p><a href="#top"><strong>Back to top</strong></a></p>
                        </div>

                    </div>

                </div>

                <div class="qe-page__header">

                    <div class="qe-page__header-copy">

                        <p class="qe-page__header-heading"><a href="intro.html">A First Course in Quantitative Economics with Python</a></p>

                        <p class="qe-page__header-subheading">网络</p>

                    </div>
                    <!-- length 2, since its a string and empty dict has length 2 - {} -->
                        <p class="qe-page__header-authors" font-size="18">
                            
                                
                                    <a href="http://www.tomsargent.com/" target="_blank"><span>Thomas J. Sargent</span></a>
                                
                            
                                
                                    and <a href="https://johnstachurski.net/" target="_blank"><span>John Stachurski</span></a>
                                
                            
                        </p>


                </div> <!-- .page__header -->



                
                <main class="qe-page__content" role="main">
                    
                    <div>
                        
  <section class="tex2jax_ignore mathjax_ignore" id="id1">
<h1><span class="section-number">45. </span>网络<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h1>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>quantecon-book-networks<span class="w"> </span>pandas-datareader
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: quantecon-book-networks in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (1.1)
Requirement already satisfied: pandas-datareader in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (0.10.0)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: numpy in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from quantecon-book-networks) (1.26.4)
Requirement already satisfied: scipy in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from quantecon-book-networks) (1.13.1)
Requirement already satisfied: pandas in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from quantecon-book-networks) (2.2.2)
Requirement already satisfied: matplotlib in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from quantecon-book-networks) (3.8.4)
Requirement already satisfied: networkx in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from quantecon-book-networks) (3.2.1)
Requirement already satisfied: quantecon in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from quantecon-book-networks) (0.7.2)
Requirement already satisfied: POT in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from quantecon-book-networks) (0.9.4)
Requirement already satisfied: lxml in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from pandas-datareader) (5.2.1)
Requirement already satisfied: requests&gt;=2.19.0 in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from pandas-datareader) (2.32.2)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: python-dateutil&gt;=2.8.2 in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from pandas-&gt;quantecon-book-networks) (2.9.0.post0)
Requirement already satisfied: pytz&gt;=2020.1 in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from pandas-&gt;quantecon-book-networks) (2024.1)
Requirement already satisfied: tzdata&gt;=2022.7 in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from pandas-&gt;quantecon-book-networks) (2023.3)
Requirement already satisfied: charset-normalizer&lt;4,&gt;=2 in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from requests&gt;=2.19.0-&gt;pandas-datareader) (2.0.4)
Requirement already satisfied: idna&lt;4,&gt;=2.5 in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from requests&gt;=2.19.0-&gt;pandas-datareader) (3.7)
Requirement already satisfied: urllib3&lt;3,&gt;=1.21.1 in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from requests&gt;=2.19.0-&gt;pandas-datareader) (2.2.2)
Requirement already satisfied: certifi&gt;=2017.4.17 in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from requests&gt;=2.19.0-&gt;pandas-datareader) (2024.6.2)
Requirement already satisfied: contourpy&gt;=1.0.1 in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from matplotlib-&gt;quantecon-book-networks) (1.2.0)
Requirement already satisfied: cycler&gt;=0.10 in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from matplotlib-&gt;quantecon-book-networks) (0.11.0)
Requirement already satisfied: fonttools&gt;=4.22.0 in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from matplotlib-&gt;quantecon-book-networks) (4.51.0)
Requirement already satisfied: kiwisolver&gt;=1.3.1 in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from matplotlib-&gt;quantecon-book-networks) (1.4.4)
Requirement already satisfied: packaging&gt;=20.0 in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from matplotlib-&gt;quantecon-book-networks) (23.2)
Requirement already satisfied: pillow&gt;=8 in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from matplotlib-&gt;quantecon-book-networks) (10.3.0)
Requirement already satisfied: pyparsing&gt;=2.3.1 in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from matplotlib-&gt;quantecon-book-networks) (3.0.9)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: numba&gt;=0.49.0 in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from quantecon-&gt;quantecon-book-networks) (0.59.1)
Requirement already satisfied: sympy in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from quantecon-&gt;quantecon-book-networks) (1.12)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: llvmlite&lt;0.43,&gt;=0.42.0dev0 in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from numba&gt;=0.49.0-&gt;quantecon-&gt;quantecon-book-networks) (0.42.0)
Requirement already satisfied: six&gt;=1.5 in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from python-dateutil&gt;=2.8.2-&gt;pandas-&gt;quantecon-book-networks) (1.16.0)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: mpmath&gt;=0.19 in /home/runner/miniconda3/envs/quantecon/lib/python3.11/site-packages (from sympy-&gt;quantecon-&gt;quantecon-book-networks) (1.3.0)
</pre></div>
</div>
</div>
</details>
</div>
<section id="id2">
<h2><span class="section-number">45.1. </span>概述<a class="headerlink" href="#id2" title="Permalink to this heading">#</a></h2>
<p>近年来，一个被称为<a class="reference external" href="https://en.wikipedia.org/wiki/Network_science">网络科学</a>的领域迅速发展。
网络科学研究对象群体之间的关系。
一个重要的例子是<a class="reference external" href="https://en.wikipedia.org/wiki/World_Wide_Web#Linking">万维网</a>，其中网页通过超链接相互连接。
另一个例子是<a class="reference external" href="https://en.wikipedia.org/wiki/Neural_circuit">人脑</a>：对大脑功能的研究强调神经细胞（神经元）之间的连接网络。
<a class="reference external" href="https://en.wikipedia.org/wiki/Artificial_neural_network">人工神经网络</a>基于这一理念，利用数据在简单处理单元之间建立复杂的连接。
研究COVID-19等<a class="reference external" href="https://en.wikipedia.org/wiki/Network_medicine#Network_epidemics">疾病传播</a>的流行病学家分析人类宿主群体之间的相互作用。
在运筹学中，网络分析用于研究基本问题，如最小成本流、旅行商问题、<a class="reference external" href="https://en.wikipedia.org/wiki/Shortest_path_problem">最短路径</a>和分配问题。
本讲座介绍了经济和金融网络。
本讲座的部分内容来自教材 <a class="reference external" href="https://networks.quantecon.org/%EF%BC%8C%E4%BD%86%E6%9C%AC%E8%AE%B2%E5%BA%A7%E7%9A%84%E6%B0%B4%E5%B9%B3%E6%9B%B4%E4%B8%BA%E5%85%A5%E9%97%A8%E3%80%82">https://networks.quantecon.org/，但本讲座的水平更为入门。</a>
我们需要以下导入。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">quantecon</span> <span class="k">as</span> <span class="nn">qe</span>

<span class="kn">import</span> <span class="nn">matplotlib.cm</span> <span class="k">as</span> <span class="nn">cm</span>
<span class="kn">import</span> <span class="nn">quantecon_book_networks.input_output</span> <span class="k">as</span> <span class="nn">qbn_io</span>
<span class="kn">import</span> <span class="nn">quantecon_book_networks.data</span> <span class="k">as</span> <span class="nn">qbn_data</span>

<span class="kn">import</span> <span class="nn">matplotlib.patches</span> <span class="k">as</span> <span class="nn">mpatches</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="id3">
<h2><span class="section-number">45.2. </span>经济和金融网络<a class="headerlink" href="#id3" title="Permalink to this heading">#</a></h2>
<p>在经济学中，网络的重要例子包括：</p>
<ul class="simple">
<li><p>金融网络</p></li>
<li><p>生产网络</p></li>
<li><p>贸易网络</p></li>
<li><p>运输网络</p></li>
<li><p>社交网络</p></li>
</ul>
<p>社交网络影响市场情绪和消费者决策的趋势。
金融网络的结构有助于确定金融系统的相对脆弱性。
生产网络的结构影响贸易、创新和局部冲击的传播。
为了更好地理解这些网络，让我们深入看一些例子。</p>
<section id="id4">
<h3><span class="section-number">45.2.1. </span>例子：飞机出口<a class="headerlink" href="#id4" title="Permalink to this heading">#</a></h3>
<p>下图显示了基于国际贸易数据SITC第2修订版的2019年大型商用飞机国际贸易情况。</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ch1_data</span> <span class="o">=</span> <span class="n">qbn_data</span><span class="o">.</span><span class="n">introduction</span><span class="p">()</span>
<span class="n">export_figures</span> <span class="o">=</span> <span class="kc">False</span>

<span class="n">DG</span> <span class="o">=</span> <span class="n">ch1_data</span><span class="p">[</span><span class="s1">&#39;aircraft_network&#39;</span><span class="p">]</span>
<span class="n">pos</span> <span class="o">=</span> <span class="n">ch1_data</span><span class="p">[</span><span class="s1">&#39;aircraft_network_pos&#39;</span><span class="p">]</span>

<span class="n">centrality</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">eigenvector_centrality</span><span class="p">(</span><span class="n">DG</span><span class="p">)</span>
<span class="n">node_total_exports</span> <span class="o">=</span> <span class="n">qbn_io</span><span class="o">.</span><span class="n">node_total_exports</span><span class="p">(</span><span class="n">DG</span><span class="p">)</span>
<span class="n">edge_weights</span> <span class="o">=</span> <span class="n">qbn_io</span><span class="o">.</span><span class="n">edge_weights</span><span class="p">(</span><span class="n">DG</span><span class="p">)</span>

<span class="n">node_pos_dict</span> <span class="o">=</span> <span class="n">pos</span>

<span class="n">node_sizes</span> <span class="o">=</span> <span class="n">qbn_io</span><span class="o">.</span><span class="n">normalise_weights</span><span class="p">(</span><span class="n">node_total_exports</span><span class="p">,</span><span class="mi">10000</span><span class="p">)</span>
<span class="n">edge_widths</span> <span class="o">=</span> <span class="n">qbn_io</span><span class="o">.</span><span class="n">normalise_weights</span><span class="p">(</span><span class="n">edge_weights</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>

<span class="n">node_colors</span> <span class="o">=</span> <span class="n">qbn_io</span><span class="o">.</span><span class="n">colorise_weights</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">centrality</span><span class="o">.</span><span class="n">values</span><span class="p">()),</span><span class="n">color_palette</span><span class="o">=</span><span class="n">cm</span><span class="o">.</span><span class="n">viridis</span><span class="p">)</span>
<span class="n">node_to_color</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">DG</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span><span class="n">node_colors</span><span class="p">))</span>
<span class="n">edge_colors</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">src</span><span class="p">,</span><span class="n">_</span> <span class="ow">in</span> <span class="n">DG</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
    <span class="n">edge_colors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node_to_color</span><span class="p">[</span><span class="n">src</span><span class="p">])</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>

<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx_nodes</span><span class="p">(</span><span class="n">DG</span><span class="p">,</span>
                       <span class="n">node_pos_dict</span><span class="p">,</span>
                       <span class="n">node_color</span><span class="o">=</span><span class="n">node_colors</span><span class="p">,</span>
                       <span class="n">node_size</span><span class="o">=</span><span class="n">node_sizes</span><span class="p">,</span>
                       <span class="n">linewidths</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                       <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span>
                       <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>

<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx_labels</span><span class="p">(</span><span class="n">DG</span><span class="p">,</span>
                        <span class="n">node_pos_dict</span><span class="p">,</span>
                        <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>

<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx_edges</span><span class="p">(</span><span class="n">DG</span><span class="p">,</span>
                       <span class="n">node_pos_dict</span><span class="p">,</span>
                       <span class="n">edge_color</span><span class="o">=</span><span class="n">edge_colors</span><span class="p">,</span>
                       <span class="n">width</span><span class="o">=</span><span class="n">edge_widths</span><span class="p">,</span>
                       <span class="n">arrows</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                       <span class="n">arrowsize</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
                       <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
                       <span class="n">arrowstyle</span><span class="o">=</span><span class="s1">&#39;-&gt;&#39;</span><span class="p">,</span>
                       <span class="n">node_size</span><span class="o">=</span><span class="n">node_sizes</span><span class="p">,</span>
                       <span class="n">connectionstyle</span><span class="o">=</span><span class="s1">&#39;arc3,rad=0.15&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<figure class="align-default" id="aircraft-network">
<a class="reference internal image-reference" href="_images/4f4d46c5d1d7e0cbc5455a307e20f2c5c039bb75c21887972f2f338d5f6c4523.png"><img alt="_images/4f4d46c5d1d7e0cbc5455a307e20f2c5c039bb75c21887972f2f338d5f6c4523.png" src="_images/4f4d46c5d1d7e0cbc5455a307e20f2c5c039bb75c21887972f2f338d5f6c4523.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 45.1 </span><span class="caption-text">商用飞机网络</span><a class="headerlink" href="#aircraft-network" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</div>
</div>
<p>图中的圆圈被称为<strong>节点</strong>或<strong>顶点</strong> – 在这个例子中，它们代表国家。
图中的箭头被称为<strong>边</strong>或<strong>链接</strong>。
节点大小与总出口成正比，边的宽度与对目标国家的出口成正比。
（数据针对重量至少15,000公斤的商用飞机贸易，数据来源于CID Dataverse。）
图表显示美国、法国和德国是主要的出口枢纽。
在下面的讨论中，我们将学习如何量化这些概念。</p>
</section>
<section id="id5">
<h3><span class="section-number">45.2.2. </span>例子：马尔可夫链<a class="headerlink" href="#id5" title="Permalink to this heading">#</a></h3>
<p>回想一下，在我们关于<a class="reference internal" href="markov_chains_I.html#mc-eg2"><span class="std std-ref">马尔可夫链</span></a>的讲座中，我们研究了一个商业周期的动态模型，其中的状态包括：</p>
<ul class="simple">
<li><p>“ng” = “正常增长”</p></li>
<li><p>“mr” = “轻度衰退”</p></li>
<li><p>“sr” = “严重衰退”</p></li>
</ul>
<p>让我们来看看下面这个图表</p>
<img alt="_images/mc.png" class="align-center" id="mc-networks" src="_images/mc.png" />
<p>这是一个网络的例子，其中节点集 <span class="math notranslate nohighlight">\(V\)</span> 等于状态集：
$<span class="math notranslate nohighlight">\(
    V = \{ \text{&quot;ng&quot;, &quot;mr&quot;, &quot;sr&quot;} \}
\)</span>$
节点之间的边表示一个月的转移概率。</p>
</section>
</section>
<section id="id6">
<h2><span class="section-number">45.3. </span>图论简介<a class="headerlink" href="#id6" title="Permalink to this heading">#</a></h2>
<p>现在我们已经看过一些例子，让我们转向理论部分。
这个理论将帮助我们更好地组织我们的思路。
网络科学的理论部分是使用数学的一个主要分支——<a class="reference external" href="https://en.wikipedia.org/wiki/Graph_theory">图论</a>构建的。
图论可能很复杂，我们只会涉及基础部分。
但是，这些概念已经足以让我们讨论有关经济和金融网络的有趣且重要的想法。
我们关注”有向”图，其中连接通常是不对称的（箭头通常只指向一个方向，而不是双向）。
例如，</p>
<ul class="simple">
<li><p>银行 <span class="math notranslate nohighlight">\(A\)</span> 向银行 <span class="math notranslate nohighlight">\(B\)</span> 贷款</p></li>
<li><p>公司 <span class="math notranslate nohighlight">\(A\)</span> 向公司 <span class="math notranslate nohighlight">\(B\)</span> 供应商品</p></li>
<li><p>个人 <span class="math notranslate nohighlight">\(A\)</span> 在特定社交网络上”关注”个人 <span class="math notranslate nohighlight">\(B\)</span>
（”无向”图，即连接是对称的，是有向图的一种特殊情况——我们只需要坚持每个从 <span class="math notranslate nohighlight">\(A\)</span> 指向 <span class="math notranslate nohighlight">\(B\)</span> 的箭头都配对一个从 <span class="math notranslate nohighlight">\(B\)</span> 指向 <span class="math notranslate nohighlight">\(A\)</span> 的箭头。）</p></li>
</ul>
<section id="id7">
<h3><span class="section-number">45.3.1. </span>关键定义<a class="headerlink" href="#id7" title="Permalink to this heading">#</a></h3>
<p>一个<strong>有向图</strong>由两个部分组成：</p>
<ol class="arabic simple">
<li><p>一个有限集 <span class="math notranslate nohighlight">\(V\)</span> 和</p></li>
<li><p>一组元素为 <span class="math notranslate nohighlight">\(V\)</span> 中的元素的对 <span class="math notranslate nohighlight">\((u, v)\)</span>。</p></li>
</ol>
<p><span class="math notranslate nohighlight">\(V\)</span> 的元素被称为图的<strong>顶点</strong>或<strong>节点</strong>。
对 <span class="math notranslate nohighlight">\((u,v)\)</span> 被称为图的<strong>边</strong>，所有边的集合通常用 <span class="math notranslate nohighlight">\(E\)</span> 表示。
直观和视觉上，边 <span class="math notranslate nohighlight">\((u,v)\)</span> 被理解为从节点 <span class="math notranslate nohighlight">\(u\)</span> 到节点 <span class="math notranslate nohighlight">\(v\)</span> 的一个箭头。
（表示箭头的一个巧妙方法是记录箭头的尾部和头部的位置，这正是边所做的。）</p>
<p>在 <a class="reference internal" href="#aircraft-network"><span class="std std-numref">Fig. 45.1</span></a> 所示的飞机出口例子中</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(V\)</span> 是数据集中包含的所有国家。</p></li>
<li><p><span class="math notranslate nohighlight">\(E\)</span> 是图中的所有箭头，每个箭头表示从一个国家到另一个国家的某个正数量的飞机出口。</p></li>
</ul>
<p>让我们看更多的例子。
下面显示了两个图，每个图都有三个节点。</p>
<figure class="align-default" id="poverty-trap-1">
<img alt="_images/poverty_trap_1.png" src="_images/poverty_trap_1.png" />
<figcaption>
<p><span class="caption-number">Fig. 45.2 </span><span class="caption-text">Poverty Trap</span><a class="headerlink" href="#poverty-trap-1" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>现在，我们构造一个具有相同节点但具有不同边的图。</p>
<figure class="align-default" id="poverty-trap-2">
<img alt="_images/poverty_trap_2.png" src="_images/poverty_trap_2.png" />
<figcaption>
<p><span class="caption-number">Fig. 45.3 </span><span class="caption-text">贫困陷阱</span><a class="headerlink" href="#poverty-trap-2" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>对于这些图，箭头（边）可以被视为表示给定时间单位内的正向转移概率。
通常，如果存在边 <span class="math notranslate nohighlight">\((u, v)\)</span>，则称节点 <span class="math notranslate nohighlight">\(u\)</span> 为 <span class="math notranslate nohighlight">\(v\)</span> 的<strong>直接前驱</strong>，<span class="math notranslate nohighlight">\(v\)</span> 为 <span class="math notranslate nohighlight">\(u\)</span> 的<strong>直接后继</strong>。
此外，对于 <span class="math notranslate nohighlight">\(v \in V\)</span>，</p>
<ul class="simple">
<li><p><strong>入度</strong>是 <span class="math notranslate nohighlight">\(i_d(v) = \)</span> <span class="math notranslate nohighlight">\(v\)</span> 的直接前驱数，以及</p></li>
<li><p><strong>出度</strong>是 <span class="math notranslate nohighlight">\(o_d(v) = \)</span> <span class="math notranslate nohighlight">\(v\)</span> 的直接后继数。</p></li>
</ul>
</section>
<section id="networkx">
<h3><span class="section-number">45.3.2. </span>Networkx中的有向图<a class="headerlink" href="#networkx" title="Permalink to this heading">#</a></h3>
<p>Python包 <a class="reference external" href="https://networkx.org/">Networkx</a> 为表示有向图提供了一个便捷的数据结构，并实现了许多用于分析它们的常见例程。
作为示例，让我们使用Networkx重新创建 <a class="reference internal" href="#poverty-trap-2"><span class="std std-numref">Fig. 45.3</span></a>。
为此，我们首先创建一个空的 <code class="docutils literal notranslate"><span class="pre">DiGraph</span></code> 对象：</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">G_p</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>接下来，我们用节点和边来填充它。
为此，我们列出所有边的列表，其中<em>贫穷</em>用<em>p</em>表示，以此类推：</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">edge_list</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">),</span>
             <span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">),</span>
             <span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<p>最后，我们将边添加到我们的 <code class="docutils literal notranslate"><span class="pre">DiGraph</span></code> 对象中：</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">edge_list</span><span class="p">:</span>
    <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">e</span>
    <span class="n">G_p</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>或者，我们可以使用 <code class="docutils literal notranslate"><span class="pre">add_edges_from</span></code> 方法。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">G_p</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">(</span><span class="n">edge_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>添加边会自动添加节点，所以 <code class="docutils literal notranslate"><span class="pre">G_p</span></code> 现在是我们图的正确表示。
我们可以通过使用以下代码通过Networkx绘制图来验证这一点：</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">nx</span><span class="o">.</span><span class="n">draw_spring</span><span class="p">(</span><span class="n">G_p</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">node_size</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">with_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
               <span class="n">font_weight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">,</span> <span class="n">arrows</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
               <span class="n">connectionstyle</span><span class="o">=</span><span class="s1">&#39;arc3,rad=0.25&#39;</span><span class="p">,</span> <span class="n">arrowsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<a class="reference internal image-reference" href="_images/559698b5b96cdcd67f9eb7839803702259568eac9c9da1e7a6b135e8521918ab.png"><img alt="_images/559698b5b96cdcd67f9eb7839803702259568eac9c9da1e7a6b135e8521918ab.png" src="_images/559698b5b96cdcd67f9eb7839803702259568eac9c9da1e7a6b135e8521918ab.png" style="width: 80%;" /></a>
</div>
</div>
<p>上面得到的图形与<a class="reference internal" href="#poverty-trap-2"><span class="std std-numref">Fig. 45.3</span></a>中的原始有向图相匹配。
<code class="docutils literal notranslate"><span class="pre">DiGraph</span></code>对象有计算节点入度和出度的方法。
例如，</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">G_p</span><span class="o">.</span><span class="n">in_degree</span><span class="p">(</span><span class="s1">&#39;p&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3
</pre></div>
</div>
</div>
</div>
</section>
<section id="strongly-connected">
<span id="id8"></span><h3><span class="section-number">45.3.3. </span>通信<a class="headerlink" href="#strongly-connected" title="Permalink to this heading">#</a></h3>
<p>接下来，我们研究通信和连通性，这对经济网络有重要影响。</p>
<p>如果<span class="math notranslate nohighlight">\(u=v\)</span>或存在一系列从<span class="math notranslate nohighlight">\(u\)</span>到<span class="math notranslate nohighlight">\(v\)</span>的边，则称节点<span class="math notranslate nohighlight">\(v\)</span>从节点<span class="math notranslate nohighlight">\(u\)</span><strong>可达</strong>。</p>
<ul class="simple">
<li><p>在这种情况下，我们写作<span class="math notranslate nohighlight">\(u \to v\)</span>
（从视觉上看，有一系列箭头从<span class="math notranslate nohighlight">\(u\)</span>指向<span class="math notranslate nohighlight">\(v\)</span>。）</p></li>
</ul>
<p>例如，假设我们有一个表示生产网络的有向图，其中</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(V\)</span>的元素是工业部门</p></li>
<li><p>边<span class="math notranslate nohighlight">\((i, j)\)</span>的存在意味着<span class="math notranslate nohighlight">\(i\)</span>向<span class="math notranslate nohighlight">\(j\)</span>供应产品或服务。</p></li>
</ul>
<p>那么<span class="math notranslate nohighlight">\(m \to \ell\)</span>意味着部门<span class="math notranslate nohighlight">\(m\)</span>是部门<span class="math notranslate nohighlight">\(\ell\)</span>的上游供应商。</p>
<p>如果<span class="math notranslate nohighlight">\(u \to v\)</span>且<span class="math notranslate nohighlight">\(v \to u\)</span>，则称两个节点<span class="math notranslate nohighlight">\(u\)</span>和<span class="math notranslate nohighlight">\(v\)</span><strong>相通</strong>。</p>
<p>如果所有节点都相通，则称图是<strong>强连通的</strong>。</p>
<p>例如，<a class="reference internal" href="#poverty-trap-1"><span class="std std-numref">Fig. 45.2</span></a>是强连通的，
然而在<a class="reference internal" href="#poverty-trap-2"><span class="std std-numref">Fig. 45.3</span></a>中，富人节点从穷人节点不可达，因此它不是强连通的。</p>
<p>我们可以通过首先使用Networkx构建图，然后使用<code class="docutils literal notranslate"><span class="pre">nx.is_strongly_connected</span></code>来验证这一点。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">G1</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>

<span class="n">G1</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">),(</span><span class="s1">&#39;p&#39;</span><span class="p">,</span><span class="s1">&#39;m&#39;</span><span class="p">),(</span><span class="s1">&#39;p&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">),</span>
             <span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">),</span>
             <span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)])</span>

<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx</span><span class="p">(</span><span class="n">G1</span><span class="p">,</span> <span class="n">with_labels</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<a class="reference internal image-reference" href="_images/83d05f5b04c66077b916cf82bfc5eaf27a6849866b234594a6b2ceac4074897a.png"><img alt="_images/83d05f5b04c66077b916cf82bfc5eaf27a6849866b234594a6b2ceac4074897a.png" src="_images/83d05f5b04c66077b916cf82bfc5eaf27a6849866b234594a6b2ceac4074897a.png" style="width: 80%;" /></a>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nx</span><span class="o">.</span><span class="n">is_strongly_connected</span><span class="p">(</span><span class="n">G1</span><span class="p">)</span>    <span class="c1">#检查上面的图是否强关联</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">G2</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>

<span class="n">G2</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">),</span>
             <span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">),</span>
             <span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)])</span>

<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx</span><span class="p">(</span><span class="n">G2</span><span class="p">,</span> <span class="n">with_labels</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<a class="reference internal image-reference" href="_images/48cec1ab6e8eaf0423fed4fa64193fad3ca56b3622cb5494edabeabd0c5ef6e8.png"><img alt="_images/48cec1ab6e8eaf0423fed4fa64193fad3ca56b3622cb5494edabeabd0c5ef6e8.png" src="_images/48cec1ab6e8eaf0423fed4fa64193fad3ca56b3622cb5494edabeabd0c5ef6e8.png" style="width: 80%;" /></a>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nx</span><span class="o">.</span><span class="n">is_strongly_connected</span><span class="p">(</span><span class="n">G2</span><span class="p">)</span>    <span class="c1">#检查上面的图是否强关联</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>False
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="id9">
<h2><span class="section-number">45.4. </span>加权图<a class="headerlink" href="#id9" title="Permalink to this heading">#</a></h2>
<p>我们现在介绍加权图，其中每条边都附有权重（数字）。</p>
<section id="id10">
<h3><span class="section-number">45.4.1. </span>按国家划分的国际私人信贷流动<a class="headerlink" href="#id10" title="Permalink to this heading">#</a></h3>
<p>为了说明这个概念，请看下图，它展示了私人银行之间的资金流动（即贷款），按原始国家分组。</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Z</span> <span class="o">=</span> <span class="n">ch1_data</span><span class="p">[</span><span class="s2">&quot;adjacency_matrix&quot;</span><span class="p">][</span><span class="s2">&quot;Z&quot;</span><span class="p">]</span>
<span class="n">Z_visual</span><span class="o">=</span> <span class="n">ch1_data</span><span class="p">[</span><span class="s2">&quot;adjacency_matrix&quot;</span><span class="p">][</span><span class="s2">&quot;Z_visual&quot;</span><span class="p">]</span>
<span class="n">countries</span> <span class="o">=</span> <span class="n">ch1_data</span><span class="p">[</span><span class="s2">&quot;adjacency_matrix&quot;</span><span class="p">][</span><span class="s2">&quot;countries&quot;</span><span class="p">]</span>

<span class="n">G</span> <span class="o">=</span> <span class="n">qbn_io</span><span class="o">.</span><span class="n">adjacency_matrix_to_graph</span><span class="p">(</span><span class="n">Z_visual</span><span class="p">,</span> <span class="n">countries</span><span class="p">,</span> <span class="n">tol</span><span class="o">=</span><span class="mf">0.03</span><span class="p">)</span>

<span class="n">centrality</span> <span class="o">=</span> <span class="n">qbn_io</span><span class="o">.</span><span class="n">eigenvector_centrality</span><span class="p">(</span><span class="n">Z_visual</span><span class="p">,</span> <span class="n">authority</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">node_total_exports</span> <span class="o">=</span> <span class="n">qbn_io</span><span class="o">.</span><span class="n">node_total_exports</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>
<span class="n">edge_weights</span> <span class="o">=</span> <span class="n">qbn_io</span><span class="o">.</span><span class="n">edge_weights</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>

<span class="n">node_pos_dict</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">circular_layout</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>

<span class="n">node_sizes</span> <span class="o">=</span> <span class="n">qbn_io</span><span class="o">.</span><span class="n">normalise_weights</span><span class="p">(</span><span class="n">node_total_exports</span><span class="p">,</span><span class="mi">3000</span><span class="p">)</span>
<span class="n">edge_widths</span> <span class="o">=</span> <span class="n">qbn_io</span><span class="o">.</span><span class="n">normalise_weights</span><span class="p">(</span><span class="n">edge_weights</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>


<span class="n">node_colors</span> <span class="o">=</span> <span class="n">qbn_io</span><span class="o">.</span><span class="n">colorise_weights</span><span class="p">(</span><span class="n">centrality</span><span class="p">)</span>
<span class="n">node_to_color</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span><span class="n">node_colors</span><span class="p">))</span>
<span class="n">edge_colors</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">src</span><span class="p">,</span><span class="n">_</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
    <span class="n">edge_colors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node_to_color</span><span class="p">[</span><span class="n">src</span><span class="p">])</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>

<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx_nodes</span><span class="p">(</span><span class="n">G</span><span class="p">,</span>
                       <span class="n">node_pos_dict</span><span class="p">,</span>
                       <span class="n">node_color</span><span class="o">=</span><span class="n">node_colors</span><span class="p">,</span>
                       <span class="n">node_size</span><span class="o">=</span><span class="n">node_sizes</span><span class="p">,</span>
                       <span class="n">edgecolors</span><span class="o">=</span><span class="s1">&#39;grey&#39;</span><span class="p">,</span>
                       <span class="n">linewidths</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                       <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span>
                       <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>

<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx_labels</span><span class="p">(</span><span class="n">G</span><span class="p">,</span>
                        <span class="n">node_pos_dict</span><span class="p">,</span>
                        <span class="n">font_size</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span>
                        <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>

<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx_edges</span><span class="p">(</span><span class="n">G</span><span class="p">,</span>
                       <span class="n">node_pos_dict</span><span class="p">,</span>
                       <span class="n">edge_color</span><span class="o">=</span><span class="n">edge_colors</span><span class="p">,</span>
                       <span class="n">width</span><span class="o">=</span><span class="n">edge_widths</span><span class="p">,</span>
                       <span class="n">arrows</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                       <span class="n">arrowsize</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
                       <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
                       <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
                       <span class="n">arrowstyle</span><span class="o">=</span><span class="s1">&#39;-&gt;&#39;</span><span class="p">,</span>
                       <span class="n">node_size</span><span class="o">=</span><span class="n">node_sizes</span><span class="p">,</span>
                       <span class="n">connectionstyle</span><span class="o">=</span><span class="s1">&#39;arc3,rad=0.15&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<figure class="align-default" id="financial-network">
<a class="reference internal image-reference" href="_images/9f65d969876eb9d14c13b773bee584923c351ecf76194adc1bf6f6e2ac8f59f5.png"><img alt="_images/9f65d969876eb9d14c13b773bee584923c351ecf76194adc1bf6f6e2ac8f59f5.png" src="_images/9f65d969876eb9d14c13b773bee584923c351ecf76194adc1bf6f6e2ac8f59f5.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 45.4 </span><span class="caption-text">国际信贷网络</span><a class="headerlink" href="#financial-network" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</div>
</div>
<p>国家代码在下表中给出</p>
<div class="pst-scrollable-table-container"><table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-center head"><p>代码</p></th>
<th class="text-left head"><p>国家</p></th>
<th class="text-center head"><p>代码</p></th>
<th class="text-center head"><p>国家</p></th>
<th class="text-center head"><p>代码</p></th>
<th class="text-center head"><p>国家</p></th>
<th class="text-center head"><p>代码</p></th>
<th class="text-center head"><p>国家</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>AU</p></td>
<td class="text-left"><p>澳大利亚</p></td>
<td class="text-center"><p>DE</p></td>
<td class="text-center"><p>德国</p></td>
<td class="text-center"><p>CL</p></td>
<td class="text-center"><p>智利</p></td>
<td class="text-center"><p>ES</p></td>
<td class="text-center"><p>西班牙</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>PT</p></td>
<td class="text-left"><p>葡萄牙</p></td>
<td class="text-center"><p>FR</p></td>
<td class="text-center"><p>法国</p></td>
<td class="text-center"><p>TR</p></td>
<td class="text-center"><p>土耳其</p></td>
<td class="text-center"><p>GB</p></td>
<td class="text-center"><p>英国</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>US</p></td>
<td class="text-left"><p>美国</p></td>
<td class="text-center"><p>IE</p></td>
<td class="text-center"><p>爱尔兰</p></td>
<td class="text-center"><p>AT</p></td>
<td class="text-center"><p>奥地利</p></td>
<td class="text-center"><p>IT</p></td>
<td class="text-center"><p>意大利</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>BE</p></td>
<td class="text-left"><p>比利时</p></td>
<td class="text-center"><p>JP</p></td>
<td class="text-center"><p>日本</p></td>
<td class="text-center"><p>SW</p></td>
<td class="text-center"><p>瑞士</p></td>
<td class="text-center"><p>SE</p></td>
<td class="text-center"><p>瑞典</p></td>
</tr>
</tbody>
</table>
</div>
<p>从日本到美国的箭头表示日本银行对所有在美国注册的银行的总体债权，这些数据由国际清算银行（BIS）收集。</p>
<p>图中每个节点的大小与所有其他节点对该节点的外国债权总额成正比。</p>
<p>箭头的宽度与它们所代表的外国债权成正比。</p>
<p>请注意，在这个网络中，几乎对于每一对节点<span class="math notranslate nohighlight">\(u\)</span>和<span class="math notranslate nohighlight">\(v\)</span>都存在一条边<span class="math notranslate nohighlight">\((u, v)\)</span>（即网络中几乎每个国家之间都有联系）。</p>
<p>（事实上，还有更多的小箭头，为了清晰起见我们省略了。）</p>
<p>因此，仅仅一个节点到另一个节点边的存在与否并不特别有信息量。</p>
<p>为了理解这个网络，我们需要记录的不仅是信贷流动的存在或缺失，还要记录流动的规模。</p>
<p>记录这些信息的正确数据结构是”加权有向图”。</p>
</section>
<section id="id11">
<h3><span class="section-number">45.4.2. </span>定义<a class="headerlink" href="#id11" title="Permalink to this heading">#</a></h3>
<p><strong>加权有向图</strong>是一种有向图，我们为其添加了一个<strong>权重函数</strong><span class="math notranslate nohighlight">\(w\)</span>，该函数为每条边分配一个正数。</p>
<p>上图显示了一个加权有向图，其中权重是资金流动的大小。</p>
<p>下图显示了一个加权有向图，箭头表示诱导有向图的边。</p>
<figure class="align-default" id="poverty-trap-weighted">
<img alt="_images/weighted.png" src="_images/weighted.png" />
<figcaption>
<p><span class="caption-number">Fig. 45.5 </span><span class="caption-text">加权贫困陷阱</span><a class="headerlink" href="#poverty-trap-weighted" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>边旁边的数字是权重。</p>
<p>在这个例子中，你可以把箭头上的数字看作是一个家庭在一年内的转移概率。</p>
<p>我们可以看到，一个富裕家庭在一年内有10%的机会变成贫困。</p>
</section>
</section>
<section id="id12">
<h2><span class="section-number">45.5. </span>邻接矩阵<a class="headerlink" href="#id12" title="Permalink to this heading">#</a></h2>
<p>另一种表示权重的方法是通过矩阵，这种方法在数值计算中非常方便。</p>
<p>对于一个有节点集 <span class="math notranslate nohighlight">\(\{v_1, \ldots, v_n\}\)</span>、边集 <span class="math notranslate nohighlight">\(E\)</span> 和权重函数 <span class="math notranslate nohighlight">\(w\)</span> 的加权有向图，其<strong>邻接矩阵</strong>是一个矩阵</p>
<div class="math notranslate nohighlight">
\[\begin{split}
A = (a_{ij})_{1 \leq i,j \leq n}
\quad \text{其中} \quad
a_{ij} =
%
\begin{cases}
    w(v_i, v_j) &amp; \text{如果} (v_i, v_j) \in E
    \\
    0           &amp; \text{其他情况}
\end{cases}
%
\end{split}\]</div>
<p>一旦 <span class="math notranslate nohighlight">\(V\)</span> 中的节点被列举出来，权重函数和邻接矩阵本质上提供相同的信息。</p>
<p>例如，将 <span class="math notranslate nohighlight">\(\{\)</span>贫困, 中产, 富裕<span class="math notranslate nohighlight">\(\}\)</span> 分别映射到 <span class="math notranslate nohighlight">\(\{1, 2, 3\}\)</span>，
<a class="reference internal" href="#poverty-trap-weighted"><span class="std std-numref">Fig. 45.5</span></a> 中加权有向图对应的邻接矩阵是</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{pmatrix}
    0.9 &amp; 0.1 &amp; 0 \\
    0.4 &amp; 0.4 &amp; 0.2 \\
    0.1 &amp; 0.1 &amp; 0.8
\end{pmatrix}.
\end{split}\]</div>
<p>在 QuantEcon 的 <code class="docutils literal notranslate"><span class="pre">DiGraph</span></code> 实现中，权重通过关键字 <code class="docutils literal notranslate"><span class="pre">weighted</span></code> 记录：</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="p">((</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
     <span class="p">(</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">),</span>
     <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">))</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="n">G</span> <span class="o">=</span> <span class="n">qe</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">weighted</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>    <span class="c1"># 储存权重</span>
</pre></div>
</div>
</div>
</div>
<p>关于邻接矩阵的一个关键点是，对其进行转置操作会<em>反转相关有向图中的所有箭头</em>。
例如，以下有向图可以被解释为一个金融网络的简化版本，其中节点代表银行，
边表示资金流动。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">G4</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>

<span class="n">G4</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="s1">&#39;2&#39;</span><span class="p">),</span>
                   <span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="s1">&#39;1&#39;</span><span class="p">),(</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="s1">&#39;3&#39;</span><span class="p">),</span>
                   <span class="p">(</span><span class="s1">&#39;3&#39;</span><span class="p">,</span><span class="s1">&#39;4&#39;</span><span class="p">),</span>
                   <span class="p">(</span><span class="s1">&#39;4&#39;</span><span class="p">,</span><span class="s1">&#39;2&#39;</span><span class="p">),(</span><span class="s1">&#39;4&#39;</span><span class="p">,</span><span class="s1">&#39;5&#39;</span><span class="p">),</span>
                   <span class="p">(</span><span class="s1">&#39;5&#39;</span><span class="p">,</span><span class="s1">&#39;1&#39;</span><span class="p">),(</span><span class="s1">&#39;5&#39;</span><span class="p">,</span><span class="s1">&#39;3&#39;</span><span class="p">),(</span><span class="s1">&#39;5&#39;</span><span class="p">,</span><span class="s1">&#39;4&#39;</span><span class="p">)])</span>
<span class="n">pos</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">circular_layout</span><span class="p">(</span><span class="n">G4</span><span class="p">)</span>

<span class="n">edge_labels</span><span class="o">=</span><span class="p">{(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="s1">&#39;2&#39;</span><span class="p">):</span> <span class="s1">&#39;100&#39;</span><span class="p">,</span>
             <span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="s1">&#39;1&#39;</span><span class="p">):</span> <span class="s1">&#39;50&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="s1">&#39;3&#39;</span><span class="p">):</span> <span class="s1">&#39;200&#39;</span><span class="p">,</span>
             <span class="p">(</span><span class="s1">&#39;3&#39;</span><span class="p">,</span><span class="s1">&#39;4&#39;</span><span class="p">):</span> <span class="s1">&#39;100&#39;</span><span class="p">,</span>
             <span class="p">(</span><span class="s1">&#39;4&#39;</span><span class="p">,</span><span class="s1">&#39;2&#39;</span><span class="p">):</span> <span class="s1">&#39;500&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;4&#39;</span><span class="p">,</span><span class="s1">&#39;5&#39;</span><span class="p">):</span> <span class="s1">&#39;50&#39;</span><span class="p">,</span>
             <span class="p">(</span><span class="s1">&#39;5&#39;</span><span class="p">,</span><span class="s1">&#39;1&#39;</span><span class="p">):</span> <span class="s1">&#39;150&#39;</span><span class="p">,(</span><span class="s1">&#39;5&#39;</span><span class="p">,</span><span class="s1">&#39;3&#39;</span><span class="p">):</span> <span class="s1">&#39;250&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;5&#39;</span><span class="p">,</span><span class="s1">&#39;4&#39;</span><span class="p">):</span> <span class="s1">&#39;300&#39;</span><span class="p">}</span>

<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx</span><span class="p">(</span><span class="n">G4</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">node_color</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span><span class="p">,</span><span class="n">node_size</span> <span class="o">=</span> <span class="mi">500</span><span class="p">)</span>
<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx_edge_labels</span><span class="p">(</span><span class="n">G4</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">edge_labels</span><span class="o">=</span><span class="n">edge_labels</span><span class="p">)</span>
<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx_nodes</span><span class="p">(</span><span class="n">G4</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">linewidths</span><span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">edgecolors</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span><span class="p">,</span>
                       <span class="n">node_color</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span><span class="p">,</span><span class="n">node_size</span> <span class="o">=</span> <span class="mi">500</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<a class="reference internal image-reference" href="_images/eac05fc1324689a63814c99a4ee79415ddf4e08d49b0eeec234efff88a872cf7.png"><img alt="_images/eac05fc1324689a63814c99a4ee79415ddf4e08d49b0eeec234efff88a872cf7.png" src="_images/eac05fc1324689a63814c99a4ee79415ddf4e08d49b0eeec234efff88a872cf7.png" style="width: 80%;" /></a>
</div>
</div>
<p>我们看到银行2向银行3发放了200的贷款。
对应的邻接矩阵是
$$
A =</p>
<div class="amsmath math notranslate nohighlight" id="equation-64fb273f-9a2c-47e9-825b-329bd22d45e9">
<span class="eqno">(45.1)<a class="headerlink" href="#equation-64fb273f-9a2c-47e9-825b-329bd22d45e9" title="Permalink to this equation">#</a></span>\[\begin{pmatrix}
    0 &amp; 100 &amp; 0 &amp; 0 &amp; 0 \\
    50 &amp; 0 &amp; 200 &amp; 0 &amp; 0 \\
    0 &amp; 0 &amp; 0 &amp; 100 &amp; 0 \\
    0 &amp; 500 &amp; 0 &amp; 0 &amp; 50 \\
    150 &amp; 0 &amp; 250 &amp; 300 &amp; 0
\end{pmatrix}\]</div>
<div class="math notranslate nohighlight">
\[
其转置是
\]</div>
<p>A^\top =</p>
<div class="amsmath math notranslate nohighlight" id="equation-984f7ca1-9be2-435e-b7c9-67b375d6fdec">
<span class="eqno">(45.2)<a class="headerlink" href="#equation-984f7ca1-9be2-435e-b7c9-67b375d6fdec" title="Permalink to this equation">#</a></span>\[\begin{pmatrix}
    0   &amp; 50  &amp; 0   &amp; 0   &amp; 150 \\
    100 &amp; 0   &amp; 0   &amp; 500 &amp; 0 \\
    0   &amp; 200 &amp; 0   &amp; 0   &amp; 250 \\
    0   &amp; 0   &amp; 100 &amp; 0   &amp; 300 \\
    0   &amp; 0   &amp; 0   &amp; 50  &amp; 0
\end{pmatrix}\]</div>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}
相应的网络在下图中可视化，显示了贷款发放后的负债网络。
这两个网络（原始和转置）对于分析金融市场都很有用。\\```{code-cell} ipython3
G5 = nx.DiGraph()\\G5.add_edges_from([('1','2'),('1','5'),
                   ('2','1'),('2','4'),
                   ('3','2'),('3','5'),
                   ('4','3'),('4','5'),
                   ('5','4')])\\edge_labels={('1','2'): '50', ('1','5'): '150',
             ('2','1'): '100', ('2','4'): '500',
             ('3','2'): '200', ('3','5'): '250',
             ('4','3'): '100', ('4','5'): '300',
             ('5','4'): '50'}\\nx.draw_networkx(G5, pos, node_color = 'none',node_size = 500)
nx.draw_networkx_edge_labels(G5, pos, edge_labels=edge_labels)
nx.draw_networkx_nodes(G5, pos, linewidths= 0.5, edgecolors = 'black',
                       node_color = 'none',node_size = 500)\\plt.show()
```\\一般来说，每个非负的 $n \times n$ 矩阵 $A = (a_{ij})$ 都可以被视为加权有向图的邻接矩阵。
要构建图，我们设 $V = 1, \ldots, n$，并将边集 $E$ 取为所有满足 $a_{ij} &gt; 0$ 的 $(i,j)$。
对于权重函数，我们对所有边 $(i,j)$ 设置 $w(i, j) = a_{ij}$。
我们称这个图为 $A$ 诱导的加权有向图。\\## 性质
考虑一个加权有向图，其邻接矩阵为 $A$。
令 $a^k_{ij}$ 为 $A^k$（$A$ 的 $k$ 次方）中的第 $i,j$ 个元素。
以下结果在许多应用中很有用：\\````{prf:theorem}
:label: graph_theory_property1\\对于 $V$ 中的不同节点 $i, j$ 和任意整数 $k$，我们有
\end{aligned}\end{align} \]</div>
<p>a^k_{i j} &gt; 0
\quad \text{当且仅当} \quad
\text{<span class="math notranslate nohighlight">\(j\)</span> 可从 <span class="math notranslate nohighlight">\(i\)</span> 到达}。
$$</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
+++

当 $k=1$ 时，上述结果是显而易见的，对于一般情况的证明可以在 {cite}`sargent2022economic` 中找到。
现在回想特征值讲座中提到，一个非负矩阵 $A$ 被称为{ref}`不可约的&lt;irreducible&gt;`，如果对于每个 $(i,j)$，存在一个整数 $k \geq 0$，使得 $a^{k}_{ij} &gt; 0$。
根据前面的定理，不难得出下一个结果（详见 {cite}`sargent2022economic`）。

````{prf:theorem}
:label: graph_theory_property2

对于一个加权有向图，以下陈述是等价的：
1. 该有向图是强连通的。
2. 该图的邻接矩阵是不可约的。

</pre></div>
</div>
<p>我们用一个简单的例子来说明上述定理。
考虑以下加权有向图。</p>
<img alt="_images/properties.png" id="properties-graph" src="_images/properties.png" />
<p>我们首先将上述网络创建为 Networkx <code class="docutils literal notranslate"><span class="pre">DiGraph</span></code> 对象。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">G6</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>

<span class="n">G6</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="s1">&#39;2&#39;</span><span class="p">),(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="s1">&#39;3&#39;</span><span class="p">),</span>
                   <span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="s1">&#39;1&#39;</span><span class="p">),</span>
                   <span class="p">(</span><span class="s1">&#39;3&#39;</span><span class="p">,</span><span class="s1">&#39;1&#39;</span><span class="p">),(</span><span class="s1">&#39;3&#39;</span><span class="p">,</span><span class="s1">&#39;2&#39;</span><span class="p">)])</span>
</pre></div>
</div>
</div>
</div>
<p>然后我们构建相关的邻接矩阵A。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.7</span><span class="p">,</span><span class="mf">0.3</span><span class="p">],</span>    <span class="c1"># 邻接矩阵A。</span>
              <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
              <span class="p">[</span><span class="mf">0.4</span><span class="p">,</span><span class="mf">0.6</span><span class="p">,</span><span class="mi">0</span><span class="p">]])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">is_irreducible</span><span class="p">(</span><span class="n">P</span><span class="p">):</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">P</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">matrix_power</span><span class="p">(</span><span class="n">P</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">result</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">is_irreducible</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>      <span class="c1">#检查A的不可约性</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nx</span><span class="o">.</span><span class="n">is_strongly_connected</span><span class="p">(</span><span class="n">G6</span><span class="p">)</span>      <span class="c1"># 检查图的连接性</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
</section>
<section id="id13">
<h2><span class="section-number">45.6. </span>网络中心性<a class="headerlink" href="#id13" title="Permalink to this heading">#</a></h2>
<p>在研究各种网络时，一个反复出现的话题是不同节点的相对”中心性”或”重要性”。
例子包括：</p>
<ul class="simple">
<li><p>搜索引擎对网页的排名</p></li>
<li><p>确定金融网络中最重要的银行（在金融危机时中央银行应该救助哪一家）</p></li>
<li><p>确定经济中最重要的工业部门</p></li>
</ul>
<p>在接下来的内容中，<strong>中心性度量</strong>将每个加权有向图与一个向量<span class="math notranslate nohighlight">\(m\)</span>关联起来，其中<span class="math notranslate nohighlight">\(m_i\)</span>被解释为节点<span class="math notranslate nohighlight">\(v_i\)</span>的中心性（或排名）。</p>
<section id="id14">
<h3><span class="section-number">45.6.1. </span>度中心性<a class="headerlink" href="#id14" title="Permalink to this heading">#</a></h3>
<p>在给定的有向图中，衡量节点”重要性”的两个基本指标是其入度和出度。
这两者都提供了一种中心性度量。
入度中心性是一个包含图中每个节点入度的向量。
考虑以下简单例子。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">G7</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>

<span class="n">G7</span><span class="o">.</span><span class="n">add_nodes_from</span><span class="p">([</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="s1">&#39;3&#39;</span><span class="p">,</span><span class="s1">&#39;4&#39;</span><span class="p">,</span><span class="s1">&#39;5&#39;</span><span class="p">,</span><span class="s1">&#39;6&#39;</span><span class="p">,</span><span class="s1">&#39;7&#39;</span><span class="p">])</span>

<span class="n">G7</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="s1">&#39;2&#39;</span><span class="p">),(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="s1">&#39;6&#39;</span><span class="p">),</span>
                   <span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="s1">&#39;1&#39;</span><span class="p">),(</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="s1">&#39;4&#39;</span><span class="p">),</span>
                   <span class="p">(</span><span class="s1">&#39;3&#39;</span><span class="p">,</span><span class="s1">&#39;2&#39;</span><span class="p">),</span>
                   <span class="p">(</span><span class="s1">&#39;4&#39;</span><span class="p">,</span><span class="s1">&#39;2&#39;</span><span class="p">),</span>
                   <span class="p">(</span><span class="s1">&#39;5&#39;</span><span class="p">,</span><span class="s1">&#39;3&#39;</span><span class="p">),(</span><span class="s1">&#39;5&#39;</span><span class="p">,</span><span class="s1">&#39;4&#39;</span><span class="p">),</span>
                   <span class="p">(</span><span class="s1">&#39;6&#39;</span><span class="p">,</span><span class="s1">&#39;1&#39;</span><span class="p">),</span>
                   <span class="p">(</span><span class="s1">&#39;7&#39;</span><span class="p">,</span><span class="s1">&#39;4&#39;</span><span class="p">),(</span><span class="s1">&#39;7&#39;</span><span class="p">,</span><span class="s1">&#39;6&#39;</span><span class="p">)])</span>
<span class="n">pos</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">planar_layout</span><span class="p">(</span><span class="n">G7</span><span class="p">)</span>

<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx</span><span class="p">(</span><span class="n">G7</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">node_color</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">,</span> <span class="n">node_size</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx_nodes</span><span class="p">(</span><span class="n">G7</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">linewidths</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">edgecolors</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span>
                       <span class="n">node_color</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">,</span><span class="n">node_size</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<figure class="align-default" id="sample-gph-1">
<a class="reference internal image-reference" href="_images/a727c405d8eba6cb137fa128f534304a277e7bfd5b30c1083b91b745530b9e00.png"><img alt="_images/a727c405d8eba6cb137fa128f534304a277e7bfd5b30c1083b91b745530b9e00.png" src="_images/a727c405d8eba6cb137fa128f534304a277e7bfd5b30c1083b91b745530b9e00.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 45.6 </span><span class="caption-text">样本图</span><a class="headerlink" href="#sample-gph-1" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</div>
</div>
<p>以下代码显示了所有节点的入度中心性。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">iG7</span> <span class="o">=</span> <span class="p">[</span><span class="n">G7</span><span class="o">.</span><span class="n">in_degree</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">G7</span><span class="o">.</span><span class="n">nodes</span><span class="p">()]</span>   <span class="c1">#计算入度中心性</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">iG7</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1 2
2 3
3 1
4 3
5 0
6 2
7 0
</pre></div>
</div>
</div>
</div>
<p>考虑<a class="reference internal" href="#financial-network"><span class="std std-numref">Fig. 45.4</span></a>中显示的国际信贷网络。
以下图表显示了每个国家的入度中心性。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">D</span> <span class="o">=</span> <span class="n">qbn_io</span><span class="o">.</span><span class="n">build_unweighted_matrix</span><span class="p">(</span><span class="n">Z</span><span class="p">)</span>
<span class="n">indegree</span> <span class="o">=</span> <span class="n">D</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">centrality_plot_data</span><span class="p">(</span><span class="n">countries</span><span class="p">,</span> <span class="n">centrality_measures</span><span class="p">):</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="n">countries</span><span class="p">,</span>
                       <span class="s1">&#39;centrality&#39;</span><span class="p">:</span><span class="n">centrality_measures</span><span class="p">,</span>
                       <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="n">qbn_io</span><span class="o">.</span><span class="n">colorise_weights</span><span class="p">(</span><span class="n">centrality_measures</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
                       <span class="p">})</span>
    <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;centrality&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">centrality_plot_data</span><span class="p">(</span><span class="n">countries</span><span class="p">,</span> <span class="n">indegree</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">,</span> <span class="s1">&#39;centrality&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>

<span class="n">patch</span> <span class="o">=</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Patch</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;in degree&#39;</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="o">=</span><span class="p">[</span><span class="n">patch</span><span class="p">],</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">handlelength</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">20</span><span class="p">))</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<a class="reference internal image-reference" href="_images/972b8b130ff43e02a06a99e401f4342286523e2f107ea8970ebe7bb580f666f5.png"><img alt="_images/972b8b130ff43e02a06a99e401f4342286523e2f107ea8970ebe7bb580f666f5.png" src="_images/972b8b130ff43e02a06a99e401f4342286523e2f107ea8970ebe7bb580f666f5.png" style="width: 80%;" /></a>
</div>
</div>
<p>虽然入度和出度中心性计算简单，但它们并不总是有用。
在<a class="reference internal" href="#financial-network"><span class="std std-numref">Fig. 45.4</span></a>中，几乎每个节点之间都存在边，
所以基于入度或出度的中心性排名无法有效区分国家。
这在上图中也可以看到。
另一个例子是网络搜索引擎的任务，它在用户输入搜索时按相关性对页面进行排名。
假设网页A的入站链接是网页B的两倍。
入度中心性告诉我们页面A应该获得更高的排名。
但实际上，页面A可能不如页面B重要。
原因是，假设指向A的链接来自几乎没有流量的页面，
而指向B的链接来自流量非常大的页面。
在这种情况下，页面B可能会收到更多访问者，这反过来表明
页面B包含更有价值（或更有趣）的内容。
思考这一点suggests重要性可能是<em>递归的</em>。
这意味着给定节点的重要性取决于
链接到它的其他节点的重要性。
作为另一个例子，我们可以想象一个生产网络，其中一个
给定部门的重要性取决于它供应的部门的重要性。
这reverses了前面例子的顺序：现在给定节点的重要性
取决于它<em>链接到的</em>其他节点的重要性。
下面的中心性度量将具有这些递归特征。</p>
</section>
</section>
<section id="id15">
<h2><span class="section-number">45.7. </span>特征向量中心性<a class="headerlink" href="#id15" title="Permalink to this heading">#</a></h2>
<p>假设我们有一个带有邻接矩阵<span class="math notranslate nohighlight">\(A\)</span>的加权有向图。
为简单起见，我们假设图的节点<span class="math notranslate nohighlight">\(V\)</span>就是
整数<span class="math notranslate nohighlight">\(1, \ldots, n\)</span>。
让<span class="math notranslate nohighlight">\(r(A)\)</span>表示<span class="math notranslate nohighlight">\(A\)</span>的<a class="reference internal" href="eigen_I.html#neumann-series-lemma"><span class="std std-ref">谱半径</span></a>。
图的<strong>特征向量中心性</strong>被定义为解决以下方程的<span class="math notranslate nohighlight">\(n\)</span>维向量<span class="math notranslate nohighlight">\(e\)</span>
$<span class="math notranslate nohighlight">\( 
\begin{aligned}
    e = \frac{1}{r(A)} A e.
\end{aligned}
\)</span><span class="math notranslate nohighlight">\( (ev_central)
换句话说，\)</span>e<span class="math notranslate nohighlight">\(是\)</span>A<span class="math notranslate nohighlight">\(的主特征向量（最大特征值的特征向量 --- 
请看特征值lecture中关于{ref}`Perron-Frobenius定理&lt;perron-frobe&gt;`的讨论。
为了更好地理解{eq}`ev_central`，我们写出某个元素\)</span>e_i<span class="math notranslate nohighlight">\(的完整表达式
\)</span><span class="math notranslate nohighlight">\(
\begin{aligned}
    e_i = \frac{1}{r(A)} \sum_{1 \leq j \leq n} a_{ij} e_j
\end{aligned}
\)</span><span class="math notranslate nohighlight">\( (eq_eicen)
注意定义的递归性质：节点\)</span>i<span class="math notranslate nohighlight">\(获得的中心性
与所有节点中心性的加权和成正比，权重为
从\)</span>i<span class="math notranslate nohighlight">\(到这些节点的*流量率*。
如果节点\)</span>i$满足以下条件，则它的排名很高：</p>
<ol class="arabic simple">
<li><p>从<span class="math notranslate nohighlight">\(i\)</span>出发的边很多，</p></li>
<li><p>这些边的权重很大，以及</p></li>
<li><p>这些边指向其他排名很高的节点。
稍后，当我们研究生产网络中的需求冲击时，特征向量中心性将有
更具体的解释。
我们将看到，在生产网络中，具有高特征向量中心性的部门是重要的<em>供应商</em>。
特别是，一旦订单通过网络向后流动，它们就会被各种需求冲击激活。
要计算特征向量中心性，我们可以使用以下函数。</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">eigenvector_centrality</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">authority</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">   计算矩阵A的主特征向量。假设A是本原矩阵，并使用幂法。</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">A_temp</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">T</span> <span class="k">if</span> <span class="n">authority</span> <span class="k">else</span> <span class="n">A</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">A_temp</span><span class="p">)</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">eigvals</span><span class="p">(</span><span class="n">A_temp</span><span class="p">)))</span>
    <span class="n">e</span> <span class="o">=</span> <span class="n">r</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="n">k</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">matrix_power</span><span class="p">(</span><span class="n">A_temp</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span> <span class="o">@</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">e</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>让我们为<a class="reference internal" href="#sample-gph-1"><span class="std std-numref">Fig. 45.6</span></a>中生成的图计算特征向量中心性。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">to_numpy_array</span><span class="p">(</span><span class="n">G7</span><span class="p">)</span>         <span class="c1">#计算图的邻接矩阵</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">e</span> <span class="o">=</span> <span class="n">eigenvector_centrality</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">e</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1 0.18580570704268037
2 0.18580570704268037
3 0.11483424225608219
4 0.11483424225608219
5 0.14194292957319637
6 0.11483424225608219
7 0.14194292957319637
</pre></div>
</div>
</div>
</div>
<p>虽然节点 <span class="math notranslate nohighlight">\(2\)</span> 和 <span class="math notranslate nohighlight">\(4\)</span> 具有最高的入度中心性，但我们可以看到节点 <span class="math notranslate nohighlight">\(1\)</span> 和 <span class="math notranslate nohighlight">\(2\)</span> 具有最高的特征向量中心性。
让我们重新审视<a class="reference internal" href="#financial-network"><span class="std std-numref">Fig. 45.4</span></a>中的国际信贷网络。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">eig_central</span> <span class="o">=</span> <span class="n">eigenvector_centrality</span><span class="p">(</span><span class="n">Z</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">centrality_plot_data</span><span class="p">(</span><span class="n">countries</span><span class="p">,</span> <span class="n">eig_central</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">,</span> <span class="s1">&#39;centrality&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>

<span class="n">patch</span> <span class="o">=</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Patch</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="o">=</span><span class="p">[</span><span class="n">patch</span><span class="p">],</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">handlelength</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<figure class="align-default" id="eigenvctr-centrality">
<a class="reference internal image-reference" href="_images/f137b5c9578e4f513d89da43e4180f961ae8163ded65b481ba599f21e7f09619.png"><img alt="_images/f137b5c9578e4f513d89da43e4180f961ae8163ded65b481ba599f21e7f09619.png" src="_images/f137b5c9578e4f513d89da43e4180f961ae8163ded65b481ba599f21e7f09619.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 45.7 </span><span class="caption-text">特征向量中心性</span><a class="headerlink" href="#eigenvctr-centrality" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</div>
</div>
<p>根据这个排名评分较高的国家往往在信贷供应方面扮演重要角色。
日本在这项指标中排名最高，尽管像英国和法国这样拥有大型金融部门的国家也紧随其后。
特征向量中心性的优势在于它在衡量节点重要性的同时考虑了其邻居的重要性。
谷歌的PageRank算法的核心就是特征向量中心性的一个变体，用于对网页进行排名。
其主要原理是来自重要节点（以度中心性衡量）的链接比来自不重要节点的链接更有价值。</p>
<section id="id16">
<h3><span class="section-number">45.7.1. </span>卡茨中心性<a class="headerlink" href="#id16" title="Permalink to this heading">#</a></h3>
<p>特征向量中心性的一个问题是<span class="math notranslate nohighlight">\(r(A)\)</span>可能为零，这种情况下<span class="math notranslate nohighlight">\(1/r(A)\)</span>是未定义的。
出于这个和其他原因，一些研究者更倾向于使用另一种称为卡茨中心性的网络中心性度量。
固定<span class="math notranslate nohighlight">\(\beta\)</span>在<span class="math notranslate nohighlight">\((0, 1/r(A))\)</span>区间内，带权有向图的<strong>卡茨中心性</strong>定义为解决以下方程的向量<span class="math notranslate nohighlight">\(\kappa\)</span>：</p>
<div class="math notranslate nohighlight" id="equation-katz-central">
<span class="eqno">(45.3)<a class="headerlink" href="#equation-katz-central" title="Permalink to this equation">#</a></span>\[
\kappa_i =  \beta \sum_{1 \leq j 1} a_{ij} \kappa_j + 1
\qquad  \text{对所有 } i \in \{0, \ldots, n-1\}。
\]</div>
<p>这里<span class="math notranslate nohighlight">\(\beta\)</span>是我们可以选择的参数。
用向量形式我们可以写成：</p>
<div class="math notranslate nohighlight" id="equation-katz-central-vec">
<span class="eqno">(45.4)<a class="headerlink" href="#equation-katz-central-vec" title="Permalink to this equation">#</a></span>\[
\kappa = \mathbf 1 + \beta A \kappa
\]</div>
<p>其中<span class="math notranslate nohighlight">\(\mathbf 1\)</span>是一个全为1的列向量。
这种中心性度量背后的直觉与特征向量中心性提供的类似：当节点<span class="math notranslate nohighlight">\(i\)</span>被本身具有高中心性的节点链接时，它就会获得高中心性。
只要<span class="math notranslate nohighlight">\(0 &lt; \beta &lt; 1/r(A)\)</span>，卡茨中心性总是有限且定义明确的，因为这时<span class="math notranslate nohighlight">\(r(\beta A) &lt; 1\)</span>。
这意味着方程<a class="reference internal" href="#equation-katz-central-vec">(45.4)</a>有唯一解：</p>
<div class="math notranslate nohighlight">
\[
\kappa = (I - \beta A)^{-1} \mathbf{1}
\]</div>
<p>这是由<a class="reference internal" href="eigen_I.html#neumann-series-lemma"><span class="std std-ref">诺伊曼级数定理</span></a>得出的。
参数<span class="math notranslate nohighlight">\(\beta\)</span>用于确保<span class="math notranslate nohighlight">\(\kappa\)</span>是有限的。
当<span class="math notranslate nohighlight">\(r(A)&lt;1\)</span>时，我们使用<span class="math notranslate nohighlight">\(\beta=1\)</span>作为卡茨中心性计算的默认值。</p>
</section>
<section id="id17">
<h3><span class="section-number">45.7.2. </span>权威与枢纽<a class="headerlink" href="#id17" title="Permalink to this heading">#</a></h3>
<p>搜索引擎设计者认识到网页可以通过两种不同的方式变得重要。</p>
<p>一些页面具有高<strong>枢纽中心性</strong>，意味着它们链接到有价值的信息来源（例如，新闻聚合网站）。</p>
<p>其他页面具有高<strong>权威中心性</strong>，意味着它们包含有价值的信息，这一点通过指向它们的链接的数量和重要性来体现（例如，受人尊敬的新闻机构的网站）。</p>
<p>类似的概念也已经应用于经济网络（通常使用不同的术语）。</p>
<p>我们之前讨论的特征向量中心性和Katz中心性衡量的是枢纽中心性。
（如果节点指向其他具有高中心性的节点，则它们具有高中心性。）</p>
<p>如果我们更关心权威中心性，我们可以使用相同的定义，只是取邻接矩阵的转置。
这之所以有效，是因为取转置会反转箭头的方向。
（现在，如果节点接收来自其他具有高中心性的节点的链接，它们将具有高中心性。）</p>
<p>例如，具有邻接矩阵<span class="math notranslate nohighlight">\(A\)</span>的加权有向图的<strong>基于权威的特征向量中心性</strong>是解决以下方程的向量<span class="math notranslate nohighlight">\(e\)</span>：</p>
<div class="math notranslate nohighlight" id="equation-eicena0">
<span class="eqno">(45.5)<a class="headerlink" href="#equation-eicena0" title="Permalink to this equation">#</a></span>\[
e = \frac{1}{r(A)} A^\top e.
\]</div>
<p>与原始定义的唯一区别是<span class="math notranslate nohighlight">\(A\)</span>被其转置替代。
（转置不影响矩阵的谱半径，所以我们写成<span class="math notranslate nohighlight">\(r(A)\)</span>而不是<span class="math notranslate nohighlight">\(r(A^\top)\)</span>。）</p>
<p>按元素逐个表示，这可以写成：</p>
<div class="math notranslate nohighlight" id="equation-eicena">
<span class="eqno">(45.6)<a class="headerlink" href="#equation-eicena" title="Permalink to this equation">#</a></span>\[
e_j = \frac{1}{r(A)} \sum_{1 \leq i \leq n} a_{ij} e_i
\]</div>
<p>我们可以看到，如果许多具有高权威排名的节点链接到<span class="math notranslate nohighlight">\(j\)</span>，则<span class="math notranslate nohighlight">\(e_j\)</span>将会很高。</p>
<p>下图显示了<a class="reference internal" href="#financial-network"><span class="std std-numref">Fig. 45.4</span></a>中所示的国际信贷网络的基于权威的特征向量中心性排名。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ecentral_authority</span> <span class="o">=</span> <span class="n">eigenvector_centrality</span><span class="p">(</span><span class="n">Z</span><span class="p">,</span> <span class="n">authority</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">centrality_plot_data</span><span class="p">(</span><span class="n">countries</span><span class="p">,</span> <span class="n">ecentral_authority</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">,</span> <span class="s1">&#39;centrality&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>

<span class="n">patch</span> <span class="o">=</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Patch</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="o">=</span><span class="p">[</span><span class="n">patch</span><span class="p">],</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">handlelength</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<figure class="align-default" id="eigenvector-centrality">
<a class="reference internal image-reference" href="_images/0466667e0e15caa796518ad5dbf4b1db07a872cc88c5460a0ced33cd23112b49.png"><img alt="_images/0466667e0e15caa796518ad5dbf4b1db07a872cc88c5460a0ced33cd23112b49.png" src="_images/0466667e0e15caa796518ad5dbf4b1db07a872cc88c5460a0ced33cd23112b49.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 45.8 </span><span class="caption-text">特征向量权威度</span><a class="headerlink" href="#eigenvector-centrality" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</div>
</div>
<p>排名靠前的国家是那些吸引大量信贷流入或从其他主要参与者获得信贷流入的国家。
在这种情况下，美国作为银行间信贷的目标显然主导了排名。</p>
</section>
</section>
<section id="id18">
<h2><span class="section-number">45.8. </span>进一步阅读<a class="headerlink" href="#id18" title="Permalink to this heading">#</a></h2>
<p>我们将本讲座中讨论的观点应用于：</p>
<p>关于经济和社会网络的教科书包括 <span id="id19">[<a class="reference internal" href="zreferences.html#id281" title="Matthew O Jackson. Social and economic networks. Princeton university press, 2010.">Jackson, 2010</a>]</span>、
<span id="id20">[<a class="reference internal" href="zreferences.html#id282" title="David Easley, Jon Kleinberg, and others. Networks, crowds, and markets. Volume 8. Cambridge university press Cambridge, 2010.">Easley <em>et al.</em>, 2010</a>]</span>、<span id="id21">[<a class="reference internal" href="zreferences.html#id283" title="Stephen P Borgatti, Martin G Everett, and Jeffrey C Johnson. Analyzing social networks. Sage, 2018.">Borgatti <em>et al.</em>, 2018</a>]</span>、
<span id="id22">[<a class="reference internal" href="zreferences.html#id284" title="Thomas J Sargent and John Stachurski. Economic networks: theory and computation. arXiv preprint arXiv:2203.11972, 2022.">Sargent and Stachurski, 2022</a>]</span> 和 <span id="id23">[<a class="reference internal" href="zreferences.html#id285" title="Sanjeev Goyal. Networks: An economics approach. MIT Press, 2023.">Goyal, 2023</a>]</span>。</p>
<p>在网络科学领域，<span id="id24">[<a class="reference internal" href="zreferences.html#id286" title="Mark Newman. Networks. Oxford university press, 2018.">Newman, 2018</a>]</span>、<span id="id25">[<a class="reference internal" href="zreferences.html#id287" title="Filippo Menczer, Santo Fortunato, and Clayton A Davis. A first course in network science. Cambridge University Press, 2020.">Menczer <em>et al.</em>, 2020</a>]</span> 和
<span id="id26">[<a class="reference internal" href="zreferences.html#id288" title="Michele Coscia. The atlas for the aspiring network scientist. arXiv preprint arXiv:2101.00863, 2021.">Coscia, 2021</a>]</span> 的著作都非常出色。</p>
</section>
<section id="id27">
<h2><span class="section-number">45.9. </span>练习<a class="headerlink" href="#id27" title="Permalink to this heading">#</a></h2>
<div class="exercise admonition" id="networks_ex1">

<p class="admonition-title"><span class="caption-number">Exercise 45.1 </span></p>
<section id="exercise-content">
<p>这是一个适合喜欢证明的人的数学练习。
设 <span class="math notranslate nohighlight">\((V, E)\)</span> 是一个有向图，若 <span class="math notranslate nohighlight">\(u\)</span> 和 <span class="math notranslate nohighlight">\(v\)</span> 互通，则记作 <span class="math notranslate nohighlight">\(u \sim v\)</span>。
证明 <span class="math notranslate nohighlight">\(\sim\)</span> 是 <span class="math notranslate nohighlight">\(V\)</span> 上的<a class="reference external" href="https://en.wikipedia.org/wiki/Equivalence_relation">等价关系</a>。</p>
</section>
</div>
<div class="solution dropdown admonition" id="networks-solution-1">

<p class="admonition-title">Solution to<a class="reference internal" href="#networks_ex1"> Exercise 45.1</a></p>
<section id="solution-content">
<p><strong>自反性：</strong>
显然，<span class="math notranslate nohighlight">\(u = v \Rightarrow u \rightarrow v\)</span>。
因此，<span class="math notranslate nohighlight">\(u \sim u\)</span>。</p>
<p><strong>对称性：</strong>
假设 <span class="math notranslate nohighlight">\(u \sim v\)</span>
<span class="math notranslate nohighlight">\(\Rightarrow u \rightarrow v\)</span> 且 <span class="math notranslate nohighlight">\(v \rightarrow u\)</span>。
根据定义，这意味着 <span class="math notranslate nohighlight">\(v \sim u\)</span>。</p>
<p><strong>传递性：</strong>
假设 <span class="math notranslate nohighlight">\(u \sim v\)</span> 且 <span class="math notranslate nohighlight">\(v \sim w\)</span>
这意味着，<span class="math notranslate nohighlight">\(u \rightarrow v\)</span> 且 <span class="math notranslate nohighlight">\(v \rightarrow u\)</span>，同时 <span class="math notranslate nohighlight">\(v \rightarrow w\)</span> 且 <span class="math notranslate nohighlight">\(w \rightarrow v\)</span>。
因此，我们可以得出 <span class="math notranslate nohighlight">\(u \rightarrow v \rightarrow w\)</span> 且 <span class="math notranslate nohighlight">\(w \rightarrow v \rightarrow u\)</span>。
这意味着 <span class="math notranslate nohighlight">\(u \sim w\)</span>。</p>
</section>
</div>
<div class="exercise admonition" id="networks_ex2">

<p class="admonition-title"><span class="caption-number">Exercise 45.2 </span></p>
<section id="exercise-content">
<p>考虑一个有向图 <span class="math notranslate nohighlight">\(G\)</span>，其节点集为
$<span class="math notranslate nohighlight">\(
V = \{0,1,2,3,4,5,6,7\}
\)</span><span class="math notranslate nohighlight">\(
边集为
\)</span><span class="math notranslate nohighlight">\(
E = \{(0, 1), (0, 3), (1, 0), (2, 4), (3, 2), (3, 4), (3, 7), (4, 3), (5, 4), (5, 6), (6, 3), (6, 5), (7, 0)\}
\)</span>$</p>
<ol class="arabic simple">
<li><p>使用 <code class="docutils literal notranslate"><span class="pre">Networkx</span></code> 绘制图 <span class="math notranslate nohighlight">\(G\)</span>。</p></li>
<li><p>找出 <span class="math notranslate nohighlight">\(G\)</span> 的相关邻接矩阵 <span class="math notranslate nohighlight">\(A\)</span>。</p></li>
<li><p>使用上面定义的函数计算 <span class="math notranslate nohighlight">\(G\)</span> 的入度中心性、出度中心性和特征向量中心性。</p></li>
</ol>
</section>
</div>
<div class="solution dropdown admonition" id="networks-solution-3">

<p class="admonition-title">Solution to<a class="reference internal" href="#networks_ex2"> Exercise 45.2</a></p>
<section id="solution-content">
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 首先，让我们绘制给定的图</span>

<span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>

<span class="n">G</span><span class="o">.</span><span class="n">add_nodes_from</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span>  <span class="c1"># 添加节点</span>

<span class="n">G</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span>       <span class="c1"># 添加边</span>
                  <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
                  <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span>
                  <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">),</span>
                  <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span>
                  <span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">),(</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span>
                  <span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">3</span><span class="p">),(</span><span class="mi">6</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span>
                  <span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">0</span><span class="p">)])</span>

<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="n">nx</span><span class="o">.</span><span class="n">circular_layout</span><span class="p">(</span><span class="n">G</span><span class="p">),</span> <span class="n">node_color</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">node_size</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">with_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<a class="reference internal image-reference" href="_images/4f6dc40cfc1a4ad3b7ac3f5d2e0907a82aea15d5734f6f4628db9231f54717e7.png"><img alt="_images/4f6dc40cfc1a4ad3b7ac3f5d2e0907a82aea15d5734f6f4628db9231f54717e7.png" src="_images/4f6dc40cfc1a4ad3b7ac3f5d2e0907a82aea15d5734f6f4628db9231f54717e7.png" style="width: 80%;" /></a>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">to_numpy_array</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>      <span class="c1">#求G的邻接矩阵</span>

<span class="n">A</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[0., 1., 0., 1., 0., 0., 0., 0.],
       [1., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 1., 0., 0., 0.],
       [0., 0., 1., 0., 1., 0., 0., 1.],
       [0., 0., 0., 1., 0., 0., 0., 0.],
       [0., 0., 0., 0., 1., 0., 1., 0.],
       [0., 0., 0., 1., 0., 1., 0., 0.],
       [1., 0., 0., 0., 0., 0., 0., 0.]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">oG</span> <span class="o">=</span> <span class="p">[</span><span class="n">G</span><span class="o">.</span><span class="n">out_degree</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">()]</span>   <span class="c1"># 计算入度中心性</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">oG</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0 2
1 1
2 1
3 3
4 1
5 2
6 2
7 1
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">e</span> <span class="o">=</span> <span class="n">eigenvector_centrality</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>   <span class="c1"># 计算特征向量中心性</span>
<span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">e</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1 0.1458980838002507
2 0.09016989800748738
3 0.055728056024793506
4 0.14589810100962303
5 0.09016994824024988
6 0.1803397955498566
7 0.2016262193602515
8 0.09016989800748738
</pre></div>
</div>
</div>
</div>
</section>
</div>
<div class="exercise admonition" id="networks_ex3">

<p class="admonition-title"><span class="caption-number">Exercise 45.3 </span></p>
<section id="exercise-content">
<p>考虑一个有 <span class="math notranslate nohighlight">\(n\)</span> 个节点和 <span class="math notranslate nohighlight">\(n \times n\)</span> 邻接矩阵 <span class="math notranslate nohighlight">\(A\)</span> 的图 <span class="math notranslate nohighlight">\(G\)</span>。
令 <span class="math notranslate nohighlight">\(S = \sum_{k=0}^{n-1} A^k\)</span>
我们可以说对于任意两个节点 <span class="math notranslate nohighlight">\(i\)</span> 和 <span class="math notranslate nohighlight">\(j\)</span>，当且仅当 <span class="math notranslate nohighlight">\(S_{ij} &gt; 0\)</span> 时，<span class="math notranslate nohighlight">\(j\)</span> 可从 <span class="math notranslate nohighlight">\(i\)</span> 到达。
设计一个函数 <code class="docutils literal notranslate"><span class="pre">is_accessible</span></code>，用于检查给定图中的任意两个节点是否可达。
考虑 <a class="reference internal" href="#networks_ex2"><span class="std std-numref">Exercise 45.2</span></a> 中的图，并使用此函数检查</p>
<ol class="arabic simple">
<li><p>从 <span class="math notranslate nohighlight">\(2\)</span> 是否可以到达 <span class="math notranslate nohighlight">\(1\)</span></p></li>
<li><p>从 <span class="math notranslate nohighlight">\(3\)</span> 是否可以到达 <span class="math notranslate nohighlight">\(6\)</span></p></li>
</ol>
</section>
</div>
<div class="solution dropdown admonition" id="networks-solution-5">

<p class="admonition-title">Solution to<a class="reference internal" href="#networks_ex3"> Exercise 45.3</a></p>
<section id="solution-content">
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">is_accessible</span><span class="p">(</span><span class="n">G</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">):</span>
    <span class="n">A</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">to_numpy_array</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">matrix_power</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>

<span class="n">G</span><span class="o">.</span><span class="n">add_nodes_from</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span>  <span class="c1"># 添加节点</span>

<span class="n">G</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span>       <span class="c1"># 添加边</span>
                  <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
                  <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span>
                  <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">),</span>
                  <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span>
                  <span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">),(</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span>
                  <span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">3</span><span class="p">),(</span><span class="mi">6</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span>
                  <span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">0</span><span class="p">)])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">is_accessible</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">is_accessible</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>False
</pre></div>
</div>
</div>
</div>
</section>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                    </div>
                    
                </main> <!-- .page__content -->
                


                <footer class="qe-page__footer">

                    <p><a href="https://creativecommons.org/licenses/by-sa/4.0/"><img src="https://licensebuttons.net/l/by-sa/4.0/80x15.png"></a></p>

                    <p>Creative Commons License &ndash; This work is licensed under a Creative Commons Attribution-ShareAlike 4.0 International.</p>

                </footer> <!-- .page__footer -->

            </div> <!-- .page -->

            

            
            <div class="qe-sidebar bd-sidebar inactive" id="site-navigation">

                <div class="qe-sidebar__header">


                    Contents

                </div>

                <nav class="qe-sidebar__nav" id="qe-sidebar-nav" aria-label="Main navigation">
                    <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  导言
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="about.html">
   1. 关于这些讲座
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  经济数据
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="long_run_growth.html">
   2. 长期增长
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="business_cycle.html">
   3. 商业周期
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="inflation_history.html">
   4. 价格水平历史
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="french_rev.html">
   5. 法国大革命期间的通货膨胀
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="inequality.html">
   6. Income and Wealth Inequality
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  基础工具
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="intro_supply_demand.html">
   7. 供给与需求导论
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="linear_equations.html">
   8. 线性方程和矩阵代数
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="complex_and_trig.html">
   9. 复数和三角函数
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="geom_series.html">
   10. 基础经济学中的几何级数
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Linear Dynamics: Finite Horizons
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="pv.html">
   11. 现值
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="cons_smooth.html">
   12. 消费平滑
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="equalizing_difference.html">
   13. 均衡差异模型
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="cagan_ree.html">
   14. 价格水平的货币主义理论
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="cagan_adaptive.html">
   15. 具有自适应预期的价格水平货币主义理论
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Linear Dynamics: Infinite Horizons
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="eigen_I.html">
   16. 特征值和特征向量
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="greek_square.html">
   17. 计算平方根
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Probability and Distributions
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="prob_dist.html">
   18. 分布和概率
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="lln_clt.html">
   19. 大数定律与中心极限定理
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="monte_carlo.html">
   20. 蒙特卡罗方法与期权定价
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="heavy_tails.html">
   21. 重尾分布
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="schelling.html">
   22. Racial Segregation
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Nonlinear Dynamics
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="scalar_dynam.html">
   23. Dynamics in One Dimension
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="solow.html">
   24. 索洛-斯旺增长模型
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="cobweb.html">
   26. 蛛网模型
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="olg.html">
   27. 世代交叠模型
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="commod_price.html">
   28. 商品价格
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Monetary-Fiscal Policy Interactions
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="money_inflation.html">
   29. 通过货币资助的政府赤字和价格水平
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="unpleasant.html">
   30. 一些不愉快的货币主义算术
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="money_inflation_nonlinear.html">
   31. 通货膨胀税Laffer曲线
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="laffer_adaptive.html">
   32. Laffer曲线与自适应预期
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Stochastic Dynamics
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="ar1_processes.html">
   33. AR(1) Processes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="markov_chains_I.html">
   34. Markov Chains: Basic Concepts
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="markov_chains_II.html">
   35. Markov Chains: Irreducibility and Ergodicity
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="time_series_with_matrices.html">
   36. Univariate Time Series with Matrix Algebra
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Optimization
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="lp_intro.html">
   37. 线性规划
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="short_path.html">
   38. 最短路径
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Modeling in Higher Dimensions
 </span>
</p>
<ul class="current nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="eigen_II.html">
   41. 佩龙-弗罗贝尼乌斯定理
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="input_output.html">
   43. 输入-输出模型
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="lake_model.html">
   44. 就业的湖泊模型
  </a>
 </li>
 <li class="toctree-l1 current active active">
  <a class="current reference internal" href="#">
   45. 网络
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Markets and Competitive Equilibrium
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="supply_demand_multiple_goods.html">
   46. 多种商品的供需关系
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="supply_demand_heterogeneity.html">
   47. 市场均衡与异质性
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Estimation
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="simple_linear_regression.html">
   48. 简单线性回归模型
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="mle.html">
   49. 最大似然估计
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Other
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="troubleshooting.html">
   50. Troubleshooting
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="zreferences.html">
   51. References
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="status.html">
   52. Execution Statistics
  </a>
 </li>
</ul>

                </nav>

                <div class="qe-sidebar__footer">

                </div>

            </div> <!-- .sidebar -->
            
        </div> <!-- .main -->

        <div class="qe-toolbar">

            <div class="qe-toolbar__inner">

                <ul class="qe-toolbar__main">
                    <li data-tippy-content="Table of Contents" class="btn__sidebar"><i data-feather="menu"></i></li>
                    <li data-tippy-content="Home"><a href="intro.html"><i data-feather="home"></i></a></li>
                    <li class="btn__qelogo"><a href="https://quantecon.org" title=""><span class="show-for-sr">QuantEcon</span></a></li>
                </ul>

                <ul class="qe-toolbar__links">
                    <li class="btn__search">
                        <form action="search.html" method="get">
                            <input type="search" class="form-control" name="q" id="search-input" placeholder="Search..." aria-label="Search..." autocomplete="off" accesskey="k">
                            <i data-feather="search" id="search-icon"></i>
                        </form>
                    </li>
                    <li data-tippy-content="Fullscreen" class="btn__fullscreen"><i data-feather="maximize"></i></li>
                    <li data-tippy-content="Increase font size" class="btn__plus"><i data-feather="plus-circle"></i></li>
                    <li data-tippy-content="Decrease font size" class="btn__minus"><i data-feather="minus-circle"></i></li>
                    <li data-tippy-content="Change contrast" class="btn__contrast"><i data-feather="sunset"></i></li>
                    <li class="settings-button" id="settingsButton"><div data-tippy-content="Launch Notebook"><i data-feather="play-circle"></i></div></li>
                        <li data-tippy-content="Download PDF" onClick="window.print()"><i data-feather="file"></i></li>
                    <li data-tippy-content="View Source"><a target="_blank" href="https://github.com/QuantEcon/lecture-python-intro/networks.md" download><i data-feather="github"></i></a></li>
                </ul>

            </div>

        </div> <!-- .toolbar -->
        <div id="downloadPDFModal" style="display: none;">
            <ul class="pdf-options" style="display: block;">
                <li class="download-pdf-book" onClick="window.print()">
                    <p>Lecture (PDF)</p>
                </li>
                <li class="download-pdf-file">
                    <a href="" download><p>Book (PDF)</p></a>
                </li>
            </ul>
        </div>
        <div id="settingsModal" style="display: none;">
            <p class="modal-title"> Notebook Launcher </p>
            <div class="modal-desc">
            <p>
                Choose public or private cloud service for "Launch" button.
            </p>
            </div>
            <p class="modal-subtitle">Select a server</p>
            <ul class="modal-servers">
            <li class="active launcher-public">
                <span class="label">Public</span>
                <select id="launcher-public-input">
                
                    <option value="https://mybinder.org/v2/gh/QuantEcon/lecture-python-intro.notebooks/main?urlpath=tree/networks.ipynb">BinderHub</option>
                
                    <option value="https://colab.research.google.com/github/QuantEcon/lecture-python-intro.notebooks/blob/main/networks.ipynb">Colab</option>
                
                </select>
                <i class="fas fa-check-circle"></i>
            </li>
            <li class="launcher-private">
                <span class="label">Private</span>
                <input type="text" id="launcher-private-input" data-repourl="https://github.com/QuantEcon/lecture-python-intro.notebooks" data-urlpath="tree/lecture-python-intro.notebooks/networks.ipynb" data-branch=main>
                <i class="fas fa-check-circle"></i>
            </li>
            </ul>
            <p class="launch"><a href="https://colab.research.google.com/github/QuantEcon/lecture-python-intro.notebooks/blob/main/networks.ipynb" id="advancedLaunchButton" target="_blank">Launch Notebook</a></p>
            <script>
                // QuantEcon Notebook Launcher
                const launcherTypeElements = document.querySelectorAll('#settingsModal .modal-servers li');
                // Highlight the server type if previous selection exists
                if (typeof localStorage.launcherType !== 'undefined') {
                  for (var i = 0; i < launcherTypeElements.length; i++) {
                    launcherTypeElements[i].classList.remove('active');
                    if ( launcherTypeElements[i].classList.contains(localStorage.launcherType) ) {
                      launcherTypeElements[i].classList.add('active');
                    }
                  }
                }
                // Highlight server type on click and set local storage value
                for (var i = 0; i < launcherTypeElements.length; i++) {
                  launcherTypeElements[i].addEventListener('click', function() {
                    for (var j = 0; j < launcherTypeElements.length; j++) {
                      launcherTypeElements[j].classList.remove('active');
                    }
                    this.classList.add('active');
                    if ( this.classList.contains('launcher-private') ) {
                      localStorage.launcherType = 'launcher-private';
                    } else if ( this.classList.contains('launcher-public') ) {
                      localStorage.launcherType = 'launcher-public';
                    }
                    setLaunchServer();
                  })
                }
                const launcherPublic = document.getElementById('launcher-public-input');
                const launcherPrivate = document.getElementById('launcher-private-input');
                const pageName = "networks";
                const repoURL = "https://github.com/QuantEcon/lecture-python-intro.notebooks";
                const urlPath = "tree/lecture-python-intro.notebooks/networks.ipynb";
                const branch = "main"
                const launchNotebookLink = document.getElementById('advancedLaunchButton');

                // Highlight public server option if previous selection exists
                if (typeof localStorage.launcherPublic !== 'undefined') {
                  launcherPublic.value = localStorage.launcherPublic;
                }
                // Update local storage upon public server selection
                launcherPublic.addEventListener('change', (event) => {
                  setLaunchServer();
                });
                // Populate private server input if previous entry exists
                if (typeof localStorage.launcherPrivate !== 'undefined') {
                  launcherPrivate.value = localStorage.launcherPrivate;
                }
                // Update local storage when a private server is entered
                launcherPrivate.addEventListener('input', (event) => {
                  setLaunchServer();
                });

                // Function to update the "Launch Notebook" link href
                function setLaunchServer() {
                  launchNotebookLink.removeAttribute("style")
                  if ( localStorage.launcherType == 'launcher-private' ) {
                    let repoPrefix = "/jupyter/hub/user-redirect/git-pull?repo=" + repoURL + "&branch=" + branch + "&urlpath=" + urlPath;
                    launcherPrivateValue = launcherPrivate.value
                    if (!launcherPrivateValue) {
                        launchNotebookLink.removeAttribute("href")
                        launchNotebookLink.style.background = "grey"
                        return
                    }
                    localStorage.launcherPrivate = launcherPrivateValue;
                    privateServer = localStorage.launcherPrivate.replace(/\/$/, "")
                    if (!privateServer.includes("http")) {
                        privateServer = "http://" + privateServer
                    }
                    launchNotebookLinkURL = privateServer + repoPrefix;
                  } else if ( localStorage.launcherType == 'launcher-public' ) {
                    launcherPublicValue = launcherPublic.options[launcherPublic.selectedIndex].value;
                    localStorage.launcherPublic = launcherPublicValue;
                    launchNotebookLinkURL = localStorage.launcherPublic;
                  }
                  if (launchNotebookLinkURL) launchNotebookLink.href = launchNotebookLinkURL;
                }
                // Check if user has previously selected a server
                if ( (typeof localStorage.launcherPrivate !== 'undefined') || (typeof localStorage.launcherPublic !== 'undefined') ) {
                  setLaunchServer();
                }
                </script>

        </div>

    </div> <!-- .wrapper-->
  </body>
</html>